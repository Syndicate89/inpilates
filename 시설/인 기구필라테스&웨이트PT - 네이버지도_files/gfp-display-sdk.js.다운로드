var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n,i,r,s,o,a,u,c,d,l,h,f,v,p,E,g,m={};function y(){if(i)return n;i=1;var e=function(t){return t&&t.Math===Math&&t};return n=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||e("object"==typeof n&&n)||function(){return this}()||Function("return this")()}function A(){return s?r:(s=1,r=function(t){try{return!!t()}catch(t){return!0}})}function S(){return a?o:(a=1,o=!A()(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function R(){if(c)return u;c=1;var t=S(),e=Function.prototype,n=e.apply,i=e.call;return u="object"==typeof Reflect&&Reflect.apply||(t?i.bind(n):function(){return i.apply(n,arguments)}),u}function I(){if(l)return d;l=1;var t=S(),e=Function.prototype,n=e.call,i=t&&e.bind.bind(n,n);return d=t?i:function(t){return function(){return n.apply(t,arguments)}},d}function T(){if(f)return h;f=1;var t=I(),e=t({}.toString),n=t("".slice);return h=function(t){return n(e(t),8,-1)}}function D(){if(p)return v;p=1;var t=T(),e=I();return v=function(n){if("Function"===t(n))return e(n)}}function k(){if(g)return E;g=1;var t="object"==typeof document&&document.all;return E=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(t){return"function"==typeof t}}var b,_,w,L,O={};function C(){return _?b:(_=1,b=!A()(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function P(){if(L)return w;L=1;var t=S(),e=Function.prototype.call;return w=t?e.bind(e):function(){return e.apply(e,arguments)},w}var M,N,U,F,x,V,H,j,B,W,G,q,K,$,z,Q,X,Y,J,Z,tt,et,nt,it,rt,st,ot,at,ut,ct,dt,lt,ht,ft,vt,pt,Et,gt={};function mt(){if(M)return gt;M=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);return gt.f=n?function(t){var n=e(this,t);return!!n&&n.enumerable}:t,gt}function yt(){return U?N:(U=1,N=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}})}function At(){if(x)return F;x=1;var t=I(),e=A(),n=T(),i=Object,r=t("".split);return F=e(function(){return!i("z").propertyIsEnumerable(0)})?function(t){return"String"===n(t)?r(t,""):i(t)}:i}function St(){return H?V:(H=1,V=function(t){return null==t})}function Rt(){if(B)return j;B=1;var t=St(),e=TypeError;return j=function(n){if(t(n))throw new e("Can't call method on "+n);return n}}function It(){if(G)return W;G=1;var t=At(),e=Rt();return W=function(n){return t(e(n))}}function Tt(){if(K)return q;K=1;var t=k();return q=function(e){return"object"==typeof e?null!==e:t(e)}}function Dt(){return z?$:(z=1,$={})}function kt(){if(X)return Q;X=1;var t=Dt(),e=y(),n=k(),i=function(t){return n(t)?t:void 0};return Q=function(n,r){return arguments.length<2?i(t[n])||i(e[n]):t[n]&&t[n][r]||e[n]&&e[n][r]},Q}function bt(){return J?Y:(J=1,Y=I()({}.isPrototypeOf))}function _t(){if(tt)return Z;tt=1;var t=y().navigator,e=t&&t.userAgent;return Z=e?String(e):""}function wt(){if(nt)return et;nt=1;var t,e,n=y(),i=_t(),r=n.process,s=n.Deno,o=r&&r.versions||s&&s.version,a=o&&o.v8;return a&&(e=(t=a.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!e&&i&&(!(t=i.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=i.match(/Chrome\/(\d+)/))&&(e=+t[1]),et=e}function Lt(){if(rt)return it;rt=1;var t=wt(),e=A(),n=y().String;return it=!!Object.getOwnPropertySymbols&&!e(function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t&&t<41}),it}function Ot(){return ot?st:(ot=1,st=Lt()&&!Symbol.sham&&"symbol"==typeof Symbol.iterator)}function Ct(){if(ut)return at;ut=1;var t=kt(),e=k(),n=bt(),i=Object;return at=Ot()?function(t){return"symbol"==typeof t}:function(r){var s=t("Symbol");return e(s)&&n(s.prototype,i(r))}}function Pt(){if(dt)return ct;dt=1;var t=String;return ct=function(e){try{return t(e)}catch(t){return"Object"}}}function Mt(){if(ht)return lt;ht=1;var t=k(),e=Pt(),n=TypeError;return lt=function(i){if(t(i))return i;throw new n(e(i)+" is not a function")}}function Nt(){if(vt)return ft;vt=1;var t=Mt(),e=St();return ft=function(n,i){var r=n[i];return e(r)?void 0:t(r)}}function Ut(){if(Et)return pt;Et=1;var t=P(),e=k(),n=Tt(),i=TypeError;return pt=function(r,s){var o,a;if("string"===s&&e(o=r.toString)&&!n(a=t(o,r)))return a;if(e(o=r.valueOf)&&!n(a=t(o,r)))return a;if("string"!==s&&e(o=r.toString)&&!n(a=t(o,r)))return a;throw new i("Can't convert object to primitive value")}}var Ft,xt,Vt,Ht,jt,Bt,Wt,Gt,qt,Kt,$t,zt,Qt,Xt,Yt,Jt,Zt,te,ee,ne,ie,re,se,oe,ae,ue,ce,de,le={exports:{}};function he(){return xt?Ft:(xt=1,Ft=!0)}function fe(){if(Ht)return Vt;Ht=1;var t=y(),e=Object.defineProperty;return Vt=function(n,i){try{e(t,n,{value:i,configurable:!0,writable:!0})}catch(e){t[n]=i}return i}}function ve(){if(jt)return le.exports;jt=1;var t=he(),e=y(),n=fe(),i="__core-js_shared__",r=le.exports=e[i]||n(i,{});return(r.versions||(r.versions=[])).push({version:"3.45.1",mode:t?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"}),le.exports}function pe(){if(Wt)return Bt;Wt=1;var t=ve();return Bt=function(e,n){return t[e]||(t[e]=n||{})}}function Ee(){if(qt)return Gt;qt=1;var t=Rt(),e=Object;return Gt=function(n){return e(t(n))}}function ge(){if($t)return Kt;$t=1;var t=I(),e=Ee(),n=t({}.hasOwnProperty);return Kt=Object.hasOwn||function(t,i){return n(e(t),i)}}function me(){if(Qt)return zt;Qt=1;var t=I(),e=0,n=Math.random(),i=t(1.1.toString);return zt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+i(++e+n,36)}}function ye(){if(Yt)return Xt;Yt=1;var t=y(),e=pe(),n=ge(),i=me(),r=Lt(),s=Ot(),o=t.Symbol,a=e("wks"),u=s?o.for||o:o&&o.withoutSetter||i;return Xt=function(t){return n(a,t)||(a[t]=r&&n(o,t)?o[t]:u("Symbol."+t)),a[t]}}function Ae(){if(Zt)return Jt;Zt=1;var t=P(),e=Tt(),n=Ct(),i=Nt(),r=Ut(),s=TypeError,o=ye()("toPrimitive");return Jt=function(a,u){if(!e(a)||n(a))return a;var c,d=i(a,o);if(d){if(void 0===u&&(u="default"),c=t(d,a,u),!e(c)||n(c))return c;throw new s("Can't convert object to primitive value")}return void 0===u&&(u="number"),r(a,u)}}function Se(){if(ee)return te;ee=1;var t=Ae(),e=Ct();return te=function(n){var i=t(n,"string");return e(i)?i:i+""}}function Re(){if(ie)return ne;ie=1;var t=y(),e=Tt(),n=t.document,i=e(n)&&e(n.createElement);return ne=function(t){return i?n.createElement(t):{}}}function Ie(){if(se)return re;se=1;var t=C(),e=A(),n=Re();return re=!t&&!e(function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a})}function Te(){if(oe)return O;oe=1;var t=C(),e=P(),n=mt(),i=yt(),r=It(),s=Se(),o=ge(),a=Ie(),u=Object.getOwnPropertyDescriptor;return O.f=t?u:function(t,c){if(t=r(t),c=s(c),a)try{return u(t,c)}catch(t){}if(o(t,c))return i(!e(n.f,t,c),t[c])},O}function De(){if(ue)return ae;ue=1;var t=A(),e=k(),n=/#|\.prototype\./,i=function(n,i){var u=s[r(n)];return u===a||u!==o&&(e(i)?t(i):!!i)},r=i.normalize=function(t){return String(t).replace(n,".").toLowerCase()},s=i.data={},o=i.NATIVE="N",a=i.POLYFILL="P";return ae=i}function ke(){if(de)return ce;de=1;var t=D(),e=Mt(),n=S(),i=t(t.bind);return ce=function(t,r){return e(t),void 0===r?t:n?i(t,r):function(){return t.apply(r,arguments)}},ce}var be,_e,we,Le,Oe,Ce,Pe,Me,Ne,Ue,Fe,xe,Ve,He,je,Be,We,Ge,qe,Ke,$e,ze,Qe,Xe,Ye,Je,Ze,tn,en={};function nn(){return _e?be:(_e=1,be=C()&&A()(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}))}function rn(){if(Le)return we;Le=1;var t=Tt(),e=String,n=TypeError;return we=function(i){if(t(i))return i;throw new n(e(i)+" is not an object")}}function sn(){if(Oe)return en;Oe=1;var t=C(),e=Ie(),n=nn(),i=rn(),r=Se(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",d="writable";return en.f=t?n?function(t,e,n){if(i(t),e=r(e),i(n),"function"==typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var s=a(t,e);s&&s[d]&&(t[e]=n.value,n={configurable:c in n?n[c]:s[c],enumerable:u in n?n[u]:s[u],writable:!1})}return o(t,e,n)}:o:function(t,n,a){if(i(t),n=r(n),i(a),e)try{return o(t,n,a)}catch(t){}if("get"in a||"set"in a)throw new s("Accessors not supported");return"value"in a&&(t[n]=a.value),t},en}function on(){if(Pe)return Ce;Pe=1;var t=C(),e=sn(),n=yt();return Ce=t?function(t,i,r){return e.f(t,i,n(1,r))}:function(t,e,n){return t[e]=n,t}}function an(){if(Ne)return Me;Ne=1;var t=y(),e=R(),n=D(),i=k(),r=Te().f,s=De(),o=Dt(),a=ke(),u=on(),c=ge(),d=function(t){var n=function(i,r,s){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,r)}return new t(i,r,s)}return e(t,this,arguments)};return n.prototype=t.prototype,n};return Me=function(e,l){var h,f,v,p,E,g,m,y,A,S=e.target,R=e.global,I=e.stat,T=e.proto,D=R?t:I?t[S]:t[S]&&t[S].prototype,k=R?o:o[S]||u(o,S,{})[S],b=k.prototype;for(p in l)f=!(h=s(R?p:S+(I?".":"#")+p,e.forced))&&D&&c(D,p),g=k[p],f&&(m=e.dontCallGetSet?(A=r(D,p))&&A.value:D[p]),E=f&&m?m:l[p],(h||T||typeof g!=typeof E)&&(y=e.bind&&f?a(E,t):e.wrap&&f?d(E):T&&i(E)?n(E):E,(e.sham||E&&E.sham||g&&g.sham)&&u(y,"sham",!0),u(k,p,y),T&&(c(o,v=S+"Prototype")||u(o,v,{}),u(o[v],p,E),e.real&&b&&(h||!b[p])&&u(b,p,E)))}}function un(){if(Fe)return Ue;Fe=1;var t=ge();return Ue=function(e){return void 0!==e&&(t(e,"value")||t(e,"writable"))}}function cn(){if(Ve)return xe;Ve=1;var t=pe(),e=me(),n=t("keys");return xe=function(t){return n[t]||(n[t]=e(t))}}function dn(){return je?He:(je=1,He=!A()(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))}function ln(){if(We)return Be;We=1;var t=ge(),e=k(),n=Ee(),i=cn(),r=dn(),s=i("IE_PROTO"),o=Object,a=o.prototype;return Be=r?o.getPrototypeOf:function(i){var r=n(i);if(t(r,s))return r[s];var u=r.constructor;return e(u)&&r instanceof u?u.prototype:r instanceof o?a:null}}function hn(){return Ke?qe:(Ke=1,function(){if(Ge)return m;Ge=1;var t=an(),e=P(),n=Tt(),i=rn(),r=un(),s=Te(),o=ln();t({target:"Reflect",stat:!0},{get:function t(a,u){var c,d,l=arguments.length<3?a:arguments[2];return i(a)===l?a[u]:(c=s.f(a,u))?r(c)?c.value:void 0===c.get?void 0:e(c.get,l):n(d=o(a))?t(d,u,l):void 0}})}(),qe=Dt().Reflect.get)}function fn(){return ze?$e:(ze=1,$e=hn())}function vn(){return Xe?Qe:(Xe=1,Qe=fn())}function pn(){return Je?Ye:(Je=1,Ye=vn())}function En(){return tn?Ze:(tn=1,Ze=pn())}var gn,mn,yn,An,Sn,Rn,In,Tn,Dn,kn,bn,_n,wn,Ln,On,Cn,Pn,Mn,Nn,Un=e(En()),Fn={};function xn(){return mn?gn:(mn=1,gn=I()([].slice))}function Vn(){if(An)return yn;An=1;var t=I(),e=Mt(),n=Tt(),i=ge(),r=xn(),s=S(),o=Function,a=t([].concat),u=t([].join),c={};return yn=s?o.bind:function(t){var s=e(this),d=s.prototype,l=r(arguments,1),h=function(){var e=a(l,r(arguments));return this instanceof h?function(t,e,n){if(!i(c,e)){for(var r=[],s=0;s<e;s++)r[s]="a["+s+"]";c[e]=o("C,a","return new C("+u(r,",")+")")}return c[e](t,n)}(s,e.length,e):s.apply(t,e)};return n(d)&&(h.prototype=d),h},yn}function Hn(){if(In)return Rn;In=1;var t=y(),e=Dt();return Rn=function(n,i){var r=e[n+"Prototype"],s=r&&r[i];if(s)return s;var o=t[n],a=o&&o.prototype;return a&&a[i]}}function jn(){return Dn?Tn:(Dn=1,function(){if(Sn)return Fn;Sn=1;var t=an(),e=Vn();t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e})}(),Tn=Hn()("Function","bind"))}function Bn(){if(bn)return kn;bn=1;var t=bt(),e=jn(),n=Function.prototype;return kn=function(i){var r=i.bind;return i===n||t(n,i)&&r===n.bind?e:r}}function Wn(){return wn?_n:(wn=1,_n=Bn())}function Gn(){return On?Ln:(On=1,Ln=Wn())}function qn(){return Pn?Cn:(Pn=1,Cn=Gn())}function Kn(){return Nn?Mn:(Nn=1,Mn=qn())}var $n,zn,Qn,Xn,Yn,Jn,Zn,ti,ei,ni,ii=e(Kn()),ri={exports:{}},si={};function oi(){if(zn)return ri.exports;zn=1,function(){if($n)return si;$n=1;var t=an(),e=A(),n=It(),i=Te().f,r=C();t({target:"Object",stat:!0,forced:!r||e(function(){i(1)}),sham:!r},{getOwnPropertyDescriptor:function(t,e){return i(n(t),e)}})}();var t=Dt().Object,e=ri.exports=function(e,n){return t.getOwnPropertyDescriptor(e,n)};return t.getOwnPropertyDescriptor.sham&&(e.sham=!0),ri.exports}function ai(){return Xn?Qn:(Xn=1,Qn=oi())}function ui(){return Jn?Yn:(Jn=1,Yn=ai())}function ci(){return ti?Zn:(ti=1,Zn=ui())}function di(){return ni?ei:(ni=1,ei=ci())}var li,hi,fi,vi,pi,Ei,gi,mi,yi,Ai,Si,Ri,Ii,Ti,Di,ki,bi,_i,wi,Li=e(di());function Oi(){if(hi)return li;hi=1;var t=I(),e=Mt();return li=function(n,i,r){try{return t(e(Object.getOwnPropertyDescriptor(n,i)[r]))}catch(t){}}}function Ci(){if(vi)return fi;vi=1;var t=Tt();return fi=function(e){return t(e)||null===e}}function Pi(){if(Ei)return pi;Ei=1;var t=Ci(),e=String,n=TypeError;return pi=function(i){if(t(i))return i;throw new n("Can't set "+e(i)+" as a prototype")}}function Mi(){if(mi)return gi;mi=1;var t=Oi(),e=Tt(),n=Rt(),i=Pi();return gi=Object.setPrototypeOf||("__proto__"in{}?function(){var r,s=!1,o={};try{(r=t(Object.prototype,"__proto__","set"))(o,[]),s=o instanceof Array}catch(t){}return function(t,o){return n(t),i(o),e(t)?(s?r(t,o):t.__proto__=o,t):t}}():void 0)}function Ni(){return Si?Ai:(Si=1,yi||(yi=1,an()({target:"Object",stat:!0},{setPrototypeOf:Mi()})),Ai=Dt().Object.setPrototypeOf)}function Ui(){return Ii?Ri:(Ii=1,Ri=Ni())}function Fi(){return Di?Ti:(Di=1,Ti=Ui())}function xi(){return bi?ki:(bi=1,ki=Fi())}function Vi(){return wi?_i:(wi=1,_i=xi())}var Hi,ji,Bi,Wi,Gi,qi,Ki,$i,zi,Qi,Xi,Yi=e(Vi()),Ji={};function Zi(){return Bi?ji:(Bi=1,function(){if(Hi)return Ji;Hi=1;var t=an(),e=A(),n=Ee(),i=ln(),r=dn();t({target:"Object",stat:!0,forced:e(function(){i(1)}),sham:!r},{getPrototypeOf:function(t){return i(n(t))}})}(),ji=Dt().Object.getPrototypeOf)}function tr(){return Gi?Wi:(Gi=1,Wi=Zi())}function er(){return Ki?qi:(Ki=1,qi=tr())}function nr(){return zi?$i:(zi=1,$i=er())}function ir(){return Xi?Qi:(Xi=1,Qi=nr())}var rr=e(ir());function sr(t){var e;return sr=Yi?ii(e=rr).call(e):function(t){return t.__proto__||rr(t)},sr(t)}function or(){var t;return or="undefined"!=typeof Reflect&&Un?ii(t=Un).call(t):function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=sr(t)););return t}(t,e);if(i){var r=Li(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},or.apply(null,arguments)}var ar,ur,cr,dr,lr,hr,fr,vr,pr,Er,gr,mr,yr,Ar,Sr,Rr,Ir,Tr,Dr,kr,br,_r,wr,Lr,Or,Cr,Pr,Mr,Nr,Ur={};function Fr(){if(ur)return ar;ur=1;var t=T();return ar=Array.isArray||function(e){return"Array"===t(e)}}function xr(){if(dr)return cr;dr=1;var t=Math.ceil,e=Math.floor;return cr=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)}}function Vr(){if(hr)return lr;hr=1;var t=xr();return lr=function(e){var n=+e;return n!=n||0===n?0:t(n)}}function Hr(){if(vr)return fr;vr=1;var t=Vr(),e=Math.min;return fr=function(n){var i=t(n);return i>0?e(i,9007199254740991):0}}function jr(){if(Er)return pr;Er=1;var t=Hr();return pr=function(e){return t(e.length)}}function Br(){if(mr)return gr;mr=1;var t=TypeError;return gr=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}}function Wr(){if(Ar)return yr;Ar=1;var t=C(),e=sn(),n=yt();return yr=function(i,r,s){t?e.f(i,r,n(0,s)):i[r]=s}}function Gr(){if(Rr)return Sr;Rr=1;var t={};return t[ye()("toStringTag")]="z",Sr="[object z]"===String(t)}function qr(){if(Tr)return Ir;Tr=1;var t=Gr(),e=k(),n=T(),i=ye()("toStringTag"),r=Object,s="Arguments"===n(function(){return arguments}());return Ir=t?n:function(t){var o,a,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,e){try{return t[e]}catch(t){}}(o=r(t),i))?a:s?n(o):"Object"===(u=n(o))&&e(o.callee)?"Arguments":u}}function Kr(){if(kr)return Dr;kr=1;var t=I(),e=k(),n=ve(),i=t(Function.toString);return e(n.inspectSource)||(n.inspectSource=function(t){return i(t)}),Dr=n.inspectSource}function $r(){if(_r)return br;_r=1;var t=I(),e=A(),n=k(),i=qr(),r=kt(),s=Kr(),o=function(){},a=r("Reflect","construct"),u=/^\s*(?:class|function)\b/,c=t(u.exec),d=!u.test(o),l=function(t){if(!n(t))return!1;try{return a(o,[],t),!0}catch(t){return!1}},h=function(t){if(!n(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(u,s(t))}catch(t){return!0}};return h.sham=!0,br=!a||e(function(){var t;return l(l.call)||!l(Object)||!l(function(){t=!0})||t})?h:l}function zr(){if(Lr)return wr;Lr=1;var t=Fr(),e=$r(),n=Tt(),i=ye()("species"),r=Array;return wr=function(s){var o;return t(s)&&(o=s.constructor,(e(o)&&(o===r||t(o.prototype))||n(o)&&null===(o=o[i]))&&(o=void 0)),void 0===o?r:o}}function Qr(){if(Cr)return Or;Cr=1;var t=zr();return Or=function(e,n){return new(t(e))(0===n?0:n)}}function Xr(){if(Mr)return Pr;Mr=1;var t=A(),e=ye(),n=wt(),i=e("species");return Pr=function(e){return n>=51||!t(function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo})}}var Yr,Jr,Zr={},ts={};function es(){if(Jr)return Yr;Jr=1;var t=qr(),e=String;return Yr=function(n){if("Symbol"===t(n))throw new TypeError("Cannot convert a Symbol value to a string");return e(n)}}var ns,is,rs,ss,os,as,us,cs,ds,ls,hs,fs,vs,ps,Es,gs,ms,ys={};function As(){if(is)return ns;is=1;var t=Vr(),e=Math.max,n=Math.min;return ns=function(i,r){var s=t(i);return s<0?e(s+r,0):n(s,r)}}function Ss(){if(ss)return rs;ss=1;var t=It(),e=As(),n=jr(),i=function(i){return function(r,s,o){var a=t(r),u=n(a);if(0===u)return!i&&-1;var c,d=e(o,u);if(i&&s!=s){for(;u>d;)if((c=a[d++])!=c)return!0}else for(;u>d;d++)if((i||d in a)&&a[d]===s)return i||d||0;return!i&&-1}};return rs={includes:i(!0),indexOf:i(!1)}}function Rs(){return as?os:(as=1,os={})}function Is(){if(cs)return us;cs=1;var t=I(),e=ge(),n=It(),i=Ss().indexOf,r=Rs(),s=t([].push);return us=function(t,o){var a,u=n(t),c=0,d=[];for(a in u)!e(r,a)&&e(u,a)&&s(d,a);for(;o.length>c;)e(u,a=o[c++])&&(~i(d,a)||s(d,a));return d}}function Ts(){return ls?ds:(ls=1,ds=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function Ds(){if(fs)return hs;fs=1;var t=Is(),e=Ts();return hs=Object.keys||function(n){return t(n,e)}}function ks(){if(vs)return ys;vs=1;var t=C(),e=nn(),n=sn(),i=rn(),r=It(),s=Ds();return ys.f=t&&!e?Object.defineProperties:function(t,e){i(t);for(var o,a=r(e),u=s(e),c=u.length,d=0;c>d;)n.f(t,o=u[d++],a[o]);return t},ys}function bs(){return Es?ps:(Es=1,ps=kt()("document","documentElement"))}function _s(){if(ms)return gs;ms=1;var t,e=rn(),n=ks(),i=Ts(),r=Rs(),s=bs(),o=Re(),a="prototype",u="script",c=cn()("IE_PROTO"),d=function(){},l=function(t){return"<"+u+">"+t+"</"+u+">"},h=function(t){t.write(l("")),t.close();var e=t.parentWindow.Object;return t=null,e},f=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var e,n,r;f="undefined"!=typeof document?document.domain&&t?h(t):(n=o("iframe"),r="java"+u+":",n.style.display="none",s.appendChild(n),n.src=String(r),(e=n.contentWindow.document).open(),e.write(l("document.F=Object")),e.close(),e.F):h(t);for(var c=i.length;c--;)delete f[a][i[c]];return f()};return r[c]=!0,gs=Object.create||function(t,i){var r;return null!==t?(d[a]=e(t),r=new d,d[a]=null,r[c]=t):r=f(),void 0===i?r:n.f(r,i)}}var ws,Ls={};function Os(){if(ws)return Ls;ws=1;var t=Is(),e=Ts().concat("length","prototype");return Ls.f=Object.getOwnPropertyNames||function(n){return t(n,e)},Ls}var Cs,Ps={};function Ms(){if(Cs)return Ps;Cs=1;var t=T(),e=It(),n=Os().f,i=xn(),r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];return Ps.f=function(s){return r&&"Window"===t(s)?function(t){try{return n(t)}catch(t){return i(r)}}(s):n(e(s))},Ps}var Ns,Us,Fs,xs,Vs,Hs={};function js(){return Ns||(Ns=1,Hs.f=Object.getOwnPropertySymbols),Hs}function Bs(){if(Fs)return Us;Fs=1;var t=on();return Us=function(e,n,i,r){return r&&r.enumerable?e[n]=i:t(e,n,i),e}}function Ws(){if(Vs)return xs;Vs=1;var t=sn();return xs=function(e,n,i){return t.f(e,n,i)}}var Gs,qs,Ks,$s,zs,Qs,Xs,Ys,Js,Zs,to,eo,no,io,ro,so,oo={};function ao(){if(Gs)return oo;Gs=1;var t=ye();return oo.f=t,oo}function uo(){if(Ks)return qs;Ks=1;var t=Dt(),e=ge(),n=ao(),i=sn().f;return qs=function(r){var s=t.Symbol||(t.Symbol={});e(s,r)||i(s,r,{value:n.f(r)})}}function co(){if(zs)return $s;zs=1;var t=P(),e=kt(),n=ye(),i=Bs();return $s=function(){var r=e("Symbol"),s=r&&r.prototype,o=s&&s.valueOf,a=n("toPrimitive");s&&!s[a]&&i(s,a,function(e){return t(o,this)},{arity:1})}}function lo(){if(Xs)return Qs;Xs=1;var t=Gr(),e=qr();return Qs=t?{}.toString:function(){return"[object "+e(this)+"]"}}function ho(){if(Js)return Ys;Js=1;var t=Gr(),e=sn().f,n=on(),i=ge(),r=lo(),s=ye()("toStringTag");return Ys=function(o,a,u,c){var d=u?o:o&&o.prototype;d&&(i(d,s)||e(d,s,{configurable:!0,value:a}),c&&!t&&n(d,"toString",r))}}function fo(){if(to)return Zs;to=1;var t=y(),e=k(),n=t.WeakMap;return Zs=e(n)&&/native code/.test(String(n))}function vo(){if(no)return eo;no=1;var t,e,n,i=fo(),r=y(),s=Tt(),o=on(),a=ge(),u=ve(),c=cn(),d=Rs(),l="Object already initialized",h=r.TypeError,f=r.WeakMap;if(i||u.state){var v=u.state||(u.state=new f);v.get=v.get,v.has=v.has,v.set=v.set,t=function(t,e){if(v.has(t))throw new h(l);return e.facade=t,v.set(t,e),e},e=function(t){return v.get(t)||{}},n=function(t){return v.has(t)}}else{var p=c("state");d[p]=!0,t=function(t,e){if(a(t,p))throw new h(l);return e.facade=t,o(t,p,e),e},e=function(t){return a(t,p)?t[p]:{}},n=function(t){return a(t,p)}}return eo={set:t,get:e,has:n,enforce:function(i){return n(i)?e(i):t(i,{})},getterFor:function(t){return function(n){var i;if(!s(n)||(i=e(n)).type!==t)throw new h("Incompatible receiver, "+t+" required");return i}}}}function po(){if(ro)return io;ro=1;var t=ke(),e=I(),n=At(),i=Ee(),r=jr(),s=Qr(),o=e([].push),a=function(e){var a=1===e,u=2===e,c=3===e,d=4===e,l=6===e,h=7===e,f=5===e||l;return function(v,p,E,g){for(var m,y,A=i(v),S=n(A),R=r(S),I=t(p,E),T=0,D=g||s,k=a?D(v,R):u||h?D(v,0):void 0;R>T;T++)if((f||T in S)&&(y=I(m=S[T],T,A),e))if(a)k[T]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:o(k,m)}else switch(e){case 4:return!1;case 7:o(k,m)}return l?-1:c||d?d:k}};return io={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)}}var Eo,go,mo,yo={};function Ao(){return go?Eo:(go=1,Eo=Lt()&&!!Symbol.for&&!!Symbol.keyFor)}var So,Ro={};var Io,To,Do,ko={};function bo(){if(To)return Io;To=1;var t=I(),e=Fr(),n=k(),i=T(),r=es(),s=t([].push);return Io=function(t){if(n(t))return t;if(e(t)){for(var o=t.length,a=[],u=0;u<o;u++){var c=t[u];"string"==typeof c?s(a,c):"number"!=typeof c&&"Number"!==i(c)&&"String"!==i(c)||s(a,r(c))}var d=a.length,l=!0;return function(t,n){if(l)return l=!1,n;if(e(this))return n;for(var i=0;i<d;i++)if(a[i]===t)return n}}}}var _o,wo,Lo={};function Oo(){return wo||(wo=1,function(){if(so)return ts;so=1;var t=an(),e=y(),n=P(),i=I(),r=he(),s=C(),o=Lt(),a=A(),u=ge(),c=bt(),d=rn(),l=It(),h=Se(),f=es(),v=yt(),p=_s(),E=Ds(),g=Os(),m=Ms(),S=js(),R=Te(),T=sn(),D=ks(),k=mt(),b=Bs(),_=Ws(),w=pe(),L=cn(),O=Rs(),M=me(),N=ye(),U=ao(),F=uo(),x=co(),V=ho(),H=vo(),j=po().forEach,B=L("hidden"),W="Symbol",G="prototype",q=H.set,K=H.getterFor(W),$=Object[G],z=e.Symbol,Q=z&&z[G],X=e.RangeError,Y=e.TypeError,J=e.QObject,Z=R.f,tt=T.f,et=m.f,nt=k.f,it=i([].push),rt=w("symbols"),st=w("op-symbols"),ot=w("wks"),at=!J||!J[G]||!J[G].findChild,ut=function(t,e,n){var i=Z($,e);i&&delete $[e],tt(t,e,n),i&&t!==$&&tt($,e,i)},ct=s&&a(function(){return 7!==p(tt({},"a",{get:function(){return tt(this,"a",{value:7}).a}})).a})?ut:tt,dt=function(t,e){var n=rt[t]=p(Q);return q(n,{type:W,tag:t,description:e}),s||(n.description=e),n},lt=function(t,e,n){t===$&&lt(st,e,n),d(t);var i=h(e);return d(n),u(rt,i)?(n.enumerable?(u(t,B)&&t[B][i]&&(t[B][i]=!1),n=p(n,{enumerable:v(0,!1)})):(u(t,B)||tt(t,B,v(1,p(null))),t[B][i]=!0),ct(t,i,n)):tt(t,i,n)},ht=function(t,e){d(t);var i=l(e),r=E(i).concat(Et(i));return j(r,function(e){s&&!n(ft,i,e)||lt(t,e,i[e])}),t},ft=function(t){var e=h(t),i=n(nt,this,e);return!(this===$&&u(rt,e)&&!u(st,e))&&(!(i||!u(this,e)||!u(rt,e)||u(this,B)&&this[B][e])||i)},vt=function(t,e){var n=l(t),i=h(e);if(n!==$||!u(rt,i)||u(st,i)){var r=Z(n,i);return!r||!u(rt,i)||u(n,B)&&n[B][i]||(r.enumerable=!0),r}},pt=function(t){var e=et(l(t)),n=[];return j(e,function(t){u(rt,t)||u(O,t)||it(n,t)}),n},Et=function(t){var e=t===$,n=et(e?st:l(t)),i=[];return j(n,function(t){!u(rt,t)||e&&!u($,t)||it(i,rt[t])}),i};o||(z=function(){if(c(Q,this))throw new Y("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?f(arguments[0]):void 0,i=M(t),r=function(t){var s=void 0===this?e:this;s===$&&n(r,st,t),u(s,B)&&u(s[B],i)&&(s[B][i]=!1);var o=v(1,t);try{ct(s,i,o)}catch(t){if(!(t instanceof X))throw t;ut(s,i,o)}};return s&&at&&ct($,i,{configurable:!0,set:r}),dt(i,t)},b(Q=z[G],"toString",function(){return K(this).tag}),b(z,"withoutSetter",function(t){return dt(M(t),t)}),k.f=ft,T.f=lt,D.f=ht,R.f=vt,g.f=m.f=pt,S.f=Et,U.f=function(t){return dt(N(t),t)},s&&(_(Q,"description",{configurable:!0,get:function(){return K(this).description}}),r||b($,"propertyIsEnumerable",ft,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:z}),j(E(ot),function(t){F(t)}),t({target:W,stat:!0,forced:!o},{useSetter:function(){at=!0},useSimple:function(){at=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:function(t,e){return void 0===e?p(t):ht(p(t),e)},defineProperty:lt,defineProperties:ht,getOwnPropertyDescriptor:vt}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:pt}),x(),V(z,W),O[B]=!0}(),function(){if(mo)return yo;mo=1;var t=an(),e=kt(),n=ge(),i=es(),r=pe(),s=Ao(),o=r("string-to-symbol-registry"),a=r("symbol-to-string-registry");t({target:"Symbol",stat:!0,forced:!s},{for:function(t){var r=i(t);if(n(o,r))return o[r];var s=e("Symbol")(r);return o[r]=s,a[s]=r,s}})}(),function(){if(So)return Ro;So=1;var t=an(),e=ge(),n=Ct(),i=Pt(),r=pe(),s=Ao(),o=r("symbol-to-string-registry");t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(t){if(!n(t))throw new TypeError(i(t)+" is not a symbol");if(e(o,t))return o[t]}})}(),function(){if(Do)return ko;Do=1;var t=an(),e=kt(),n=R(),i=P(),r=I(),s=A(),o=k(),a=Ct(),u=xn(),c=bo(),d=Lt(),l=String,h=e("JSON","stringify"),f=r(/./.exec),v=r("".charAt),p=r("".charCodeAt),E=r("".replace),g=r(1.1.toString),m=/[\uD800-\uDFFF]/g,y=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,T=!d||s(function(){var t=e("Symbol")("stringify detection");return"[null]"!==h([t])||"{}"!==h({a:t})||"{}"!==h(Object(t))}),D=s(function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")}),b=function(t,e){var r=u(arguments),s=c(e);if(o(s)||void 0!==t&&!a(t))return r[1]=function(t,e){if(o(s)&&(e=i(s,this,l(t),e)),!a(e))return e},n(h,null,r)},_=function(t,e,n){var i=v(n,e-1),r=v(n,e+1);return f(y,t)&&!f(S,r)||f(S,t)&&!f(y,i)?"\\u"+g(p(t,0),16):t};h&&t({target:"JSON",stat:!0,arity:3,forced:T||D},{stringify:function(t,e,i){var r=u(arguments),s=n(T?b:h,null,r);return D&&"string"==typeof s?E(s,m,_):s}})}(),function(){if(_o)return Lo;_o=1;var t=an(),e=Lt(),n=A(),i=js(),r=Ee();t({target:"Object",stat:!0,forced:!e||n(function(){i.f(1)})},{getOwnPropertySymbols:function(t){var e=i.f;return e?e(r(t)):[]}})}()),Zr}var Co,Po={};function Mo(){return Co||(Co=1,uo()("asyncDispose")),Po}var No;var Uo,Fo={};function xo(){return Uo||(Uo=1,uo()("dispose")),Fo}var Vo;var Ho;var jo,Bo={};function Wo(){return jo||(jo=1,uo()("iterator")),Bo}var Go;var qo;var Ko;var $o;var zo;var Qo;var Xo,Yo={};function Jo(){if(Xo)return Yo;Xo=1;var t=uo(),e=co();return t("toPrimitive"),e(),Yo}var Zo,ta={};var ea;var na,ia,ra,sa={};function oa(){return ra?ia:(ra=1,function(){if(Nr)return Ur;Nr=1;var t=an(),e=A(),n=Fr(),i=Tt(),r=Ee(),s=jr(),o=Br(),a=Wr(),u=Qr(),c=Xr(),d=ye(),l=wt(),h=d("isConcatSpreadable"),f=l>=51||!e(function(){var t=[];return t[h]=!1,t.concat()[0]!==t}),v=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:n(t)};t({target:"Array",proto:!0,arity:1,forced:!f||!c("concat")},{concat:function(t){var e,n,i,c,d,l=r(this),h=u(l,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(v(d=-1===e?l:arguments[e]))for(c=s(d),o(f+c),n=0;n<c;n++,f++)n in d&&a(h,f,d[n]);else o(f+1),a(h,f++,d);return h.length=f,h}})}(),Oo(),Mo(),No||(No=1,uo()("asyncIterator")),xo(),Vo||(Vo=1,uo()("hasInstance")),Ho||(Ho=1,uo()("isConcatSpreadable")),Wo(),Go||(Go=1,uo()("match")),qo||(qo=1,uo()("matchAll")),Ko||(Ko=1,uo()("replace")),$o||($o=1,uo()("search")),zo||(zo=1,uo()("species")),Qo||(Qo=1,uo()("split")),Jo(),function(){if(Zo)return ta;Zo=1;var t=kt(),e=uo(),n=ho();e("toStringTag"),n(t("Symbol"),"Symbol")}(),ea||(ea=1,uo()("unscopables")),function(){if(na)return sa;na=1;var t=y();ho()(t.JSON,"JSON",!0)}(),ia=Dt().Symbol)}var aa,ua,ca,da,la,ha,fa,va,pa,Ea,ga,ma,ya,Aa,Sa,Ra,Ia,Ta,Da,ka,ba,_a={};function wa(){return ua?aa:(ua=1,aa=function(){})}function La(){return da?ca:(da=1,ca={})}function Oa(){if(ha)return la;ha=1;var t=C(),e=ge(),n=Function.prototype,i=t&&Object.getOwnPropertyDescriptor,r=e(n,"name"),s=r&&"something"===function(){}.name,o=r&&(!t||t&&i(n,"name").configurable);return la={EXISTS:r,PROPER:s,CONFIGURABLE:o}}function Ca(){if(va)return fa;va=1;var t,e,n,i=A(),r=k(),s=Tt(),o=_s(),a=ln(),u=Bs(),c=ye(),d=he(),l=c("iterator"),h=!1;return[].keys&&("next"in(n=[].keys())?(e=a(a(n)))!==Object.prototype&&(t=e):h=!0),!s(t)||i(function(){var e={};return t[l].call(e)!==e})?t={}:d&&(t=o(t)),r(t[l])||u(t,l,function(){return this}),fa={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:h}}function Pa(){if(Ea)return pa;Ea=1;var t=Ca().IteratorPrototype,e=_s(),n=yt(),i=ho(),r=La(),s=function(){return this};return pa=function(o,a,u,c){var d=a+" Iterator";return o.prototype=e(t,{next:n(+!c,u)}),i(o,d,!1,!0),r[d]=s,o}}function Ma(){if(ma)return ga;ma=1;var t=an(),e=P(),n=he(),i=Oa(),r=k(),s=Pa(),o=ln(),a=Mi(),u=ho(),c=on(),d=Bs(),l=ye(),h=La(),f=Ca(),v=i.PROPER,p=i.CONFIGURABLE,E=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,m=l("iterator"),y="keys",A="values",S="entries",R=function(){return this};return ga=function(i,l,f,I,T,D,k){s(f,l,I);var b,_,w,L=function(t){if(t===T&&N)return N;if(!g&&t&&t in P)return P[t];switch(t){case y:case A:case S:return function(){return new f(this,t)}}return function(){return new f(this)}},O=l+" Iterator",C=!1,P=i.prototype,M=P[m]||P["@@iterator"]||T&&P[T],N=!g&&M||L(T),U="Array"===l&&P.entries||M;if(U&&(b=o(U.call(new i)))!==Object.prototype&&b.next&&(n||o(b)===E||(a?a(b,E):r(b[m])||d(b,m,R)),u(b,O,!0,!0),n&&(h[O]=R)),v&&T===A&&M&&M.name!==A&&(!n&&p?c(P,"name",A):(C=!0,N=function(){return e(M,this)})),T)if(_={values:L(A),keys:D?N:L(y),entries:L(S)},k)for(w in _)(g||C||!(w in P))&&d(P,w,_[w]);else t({target:l,proto:!0,forced:g||C},_);return n&&!k||P[m]===N||d(P,m,N,{name:T}),h[l]=N,_}}function Na(){return Aa?ya:(Aa=1,ya=function(t,e){return{value:t,done:e}})}function Ua(){if(Ra)return Sa;Ra=1;var t=It(),e=wa(),n=La(),i=vo(),r=sn().f,s=Ma(),o=Na(),a=he(),u=C(),c="Array Iterator",d=i.set,l=i.getterFor(c);Sa=s(Array,"Array",function(e,n){d(this,{type:c,target:t(e),index:0,kind:n})},function(){var t=l(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=null,o(void 0,!0);switch(t.kind){case"keys":return o(n,!1);case"values":return o(e[n],!1)}return o([n,e[n]],!1)},"values");var h=n.Arguments=n.Array;if(e("keys"),e("values"),e("entries"),!a&&u&&"values"!==h.name)try{r(h,"name",{value:"values"})}catch(t){}return Sa}function Fa(){return Ta?Ia:(Ta=1,Ia={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})}function xa(){if(Da)return _a;Da=1,Ua();var t=Fa(),e=y(),n=ho(),i=La();for(var r in t)n(e[r],r),i[r]=i.Array;return _a}function Va(){if(ba)return ka;ba=1;var t=oa();return xa(),ka=t}var Ha,ja={};var Ba;var Wa;var Ga,qa,Ka;function $a(){if(Ka)return qa;Ka=1;var t=Va();return function(){if(Ha)return ja;Ha=1;var t=ye(),e=sn().f,n=t("metadata"),i=Function.prototype;void 0===i[n]&&e(i,n,{value:null})}(),Ba||(Ba=1,Mo()),Wa||(Wa=1,xo()),Ga||(Ga=1,uo()("metadata")),qa=t}var za,Qa,Xa;function Ya(){if(Qa)return za;Qa=1;var t=kt(),e=I(),n=t("Symbol"),i=n.keyFor,r=e(n.prototype.valueOf);return za=n.isRegisteredSymbol||function(t){try{return void 0!==i(r(t))}catch(t){return!1}}}var Ja,Za,tu;function eu(){if(Za)return Ja;Za=1;for(var t=pe(),e=kt(),n=I(),i=Ct(),r=ye(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),u=n(s.prototype.valueOf),c=t("wks"),d=0,l=a(s),h=l.length;d<h;d++)try{var f=l[d];i(s[f])&&r(f)}catch(t){}return Ja=function(t){if(o&&o(t))return!0;try{for(var e=u(t),n=0,i=a(c),r=i.length;n<r;n++)if(c[i[n]]==e)return!0}catch(t){}return!1},Ja}var nu;var iu;var ru;var su;var ou;var au;var uu;var cu,du,lu,hu,fu;function vu(){if(lu)return du;lu=1;var t=$a();return Xa||(Xa=1,an()({target:"Symbol",stat:!0},{isRegisteredSymbol:Ya()})),tu||(tu=1,an()({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:eu()})),nu||(nu=1,uo()("customMatcher")),iu||(iu=1,uo()("observable")),ru||(ru=1,an()({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Ya()})),su||(su=1,an()({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:eu()})),ou||(ou=1,uo()("matcher")),au||(au=1,uo()("metadataKey")),uu||(uu=1,uo()("patternMatch")),cu||(cu=1,uo()("replaceAll")),du=t}function pu(){return fu?hu:(fu=1,hu=vu())}var Eu,gu,mu,yu,Au,Su,Ru,Iu,Tu,Du,ku,bu,_u,wu=e(pu()),Lu={};function Ou(){if(gu)return Eu;gu=1;var t=I(),e=Vr(),n=es(),i=Rt(),r=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(t){return function(a,u){var c,d,l=n(i(a)),h=e(u),f=l.length;return h<0||h>=f?t?"":void 0:(c=s(l,h))<55296||c>56319||h+1===f||(d=s(l,h+1))<56320||d>57343?t?r(l,h):c:t?o(l,h,h+2):d-56320+(c-55296<<10)+65536}};return Eu={codeAt:a(!1),charAt:a(!0)}}function Cu(){return Au?yu:(Au=1,Ua(),function(){if(mu)return Lu;mu=1;var t=Ou().charAt,e=es(),n=vo(),i=Ma(),r=Na(),s="String Iterator",o=n.set,a=n.getterFor(s);i(String,"String",function(t){o(this,{type:s,string:e(t),index:0})},function(){var e,n=a(this),i=n.string,s=n.index;return s>=i.length?r(void 0,!0):(e=t(i,s),n.index+=e.length,r(e,!1))})}(),Wo(),yu=ao().f("iterator"))}function Pu(){if(Ru)return Su;Ru=1;var t=Cu();return xa(),Su=t}function Mu(){return Tu?Iu:(Tu=1,Iu=Pu())}function Nu(){return ku?Du:(ku=1,Du=Mu())}function Uu(){return _u?bu:(_u=1,bu=Nu())}var Fu=e(Uu());function xu(t){return xu="function"==typeof wu&&"symbol"==typeof Fu?function(t){return typeof t}:function(t){return t&&"function"==typeof wu&&t.constructor===wu&&t!==wu.prototype?"symbol":typeof t},xu(t)}function Vu(t,e){if(e&&("object"==xu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var Hu,ju,Bu,Wu,Gu,qu,Ku,$u,zu,Qu,Xu;function Yu(){if(Bu)return ju;Bu=1,Hu||(Hu=1,an()({target:"Object",stat:!0,sham:!C()},{create:_s()}));var t=Dt().Object;return ju=function(e,n){return t.create(e,n)}}function Ju(){return Gu?Wu:(Gu=1,Wu=Yu())}function Zu(){return Ku?qu:(Ku=1,qu=Ju())}function tc(){return zu?$u:(zu=1,$u=Zu())}function ec(){return Xu?Qu:(Xu=1,Qu=tc())}var nc,ic,rc,sc,oc,ac,uc,cc,dc,lc,hc=e(ec()),fc={exports:{}},vc={};function pc(){if(nc)return vc;nc=1;var t=an(),e=C(),n=sn().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!e},{defineProperty:n}),vc}function Ec(){if(ic)return fc.exports;ic=1,pc();var t=Dt().Object,e=fc.exports=function(e,n,i){return t.defineProperty(e,n,i)};return t.defineProperty.sham&&(e.sham=!0),fc.exports}function gc(){return sc?rc:(sc=1,rc=Ec())}function mc(){return ac?oc:(ac=1,oc=gc())}function yc(){return cc?uc:(cc=1,uc=mc())}function Ac(){return lc?dc:(lc=1,dc=yc())}var Sc,Rc,Ic,Tc,Dc,kc,bc,_c,wc,Lc,Oc=e(Ac());function Cc(t,e){var n;return Cc=Yi?ii(n=Yi).call(n):function(t,e){return t.__proto__=e,t},Cc(t,e)}function Pc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=hc(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Oc(t,"prototype",{writable:!1}),e&&Cc(t,e)}function Mc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nc(){return Rc?Sc:(Rc=1,Jo(),Sc=ao().f("toPrimitive"))}function Uc(){return Tc?Ic:(Tc=1,Ic=Nc())}function Fc(){return kc?Dc:(kc=1,Dc=Uc())}function xc(){return _c?bc:(_c=1,bc=Fc())}function Vc(){return Lc?wc:(Lc=1,wc=xc())}var Hc,jc,Bc,Wc,Gc,qc,Kc,$c,zc,Qc,Xc,Yc,Jc,Zc,td,ed,nd,id,rd,sd,od,ad,ud,cd,dd=e(Vc());function ld(t){var e=function(t,e){if("object"!=xu(t)||!t)return t;var n=t[dd];if(void 0!==n){var i=n.call(t,e);if("object"!=xu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xu(e)?e:e+""}function hd(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Oc(t,ld(i.key),i)}}function fd(t,e,n){return e&&hd(t.prototype,e),n&&hd(t,n),Oc(t,"prototype",{writable:!1}),t}function vd(t,e,n){return(e=ld(e))in t?Oc(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pd(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Ed(t,e){return t.get(md(t,e))}function gd(t,e,n){return t.set(md(t,e),n),n}function md(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function yd(t,e,n){return e=sr(e),Vu(t,Ad()?Reflect.construct(e,n||[],sr(t).constructor):e.apply(t,n))}function Ad(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ad=function(){return!!t})()}!function(t){t.READY="ready",t.RENDERED="rendered",t.VIEWABLED="viewable",t.HOSTMETA_CHANGED="hostMetaChange",t.POSITION_UPDATED="pos-update",t.EXPOSURE_CHANGED="exposureChanged",t.VIDEO_CONTROLLER_EVENT="videoControllerEvent",t.CLICK_HANDLER_SET="clickHandlerSet",t.DESTROYED="destroyed"}(Hc||(Hc={})),function(t){t[t.PICKED=0]="PICKED",t[t.REQUESTED=1]="REQUESTED",t[t.LOADED=2]="LOADED",t[t.AD_START_REQUESTED=3]="AD_START_REQUESTED",t[t.RENDERED=4]="RENDERED",t[t.DESTROYED=5]="DESTROYED"}(jc||(jc={})),function(t){t.READY="ready",t.RENDERED="rendered",t.VIEWABLED="viewabled",t.HOSTMETA_CHANGED="hostMetaChanged",t.EXPOSURE_CHANGED="exposureChanged",t.POSITION_UPDATED="positionUpdated",t.STATE_CHANGED="stateChanged",t.DESTROYED="destroyed",t.LEGACY_VIEWABLED="viewable",t.LEGACY_HOSTMETA_CHANGED="hostMetaChange",t.LEGACY_POSITION_UPDATED="pos-update"}(Bc||(Bc={})),function(t){t.BANNER="BANNER",t.NATIVE="NATIVE",t.VIDEO="VIDEO"}(Wc||(Wc={})),function(t){t.ACK_IMPRESSION="ACK_IMPRESSION",t.CLICKED="CLICKED",t.RENDERED_IMPRESSION="RENDERED_IMPRESSION",t.VIEWABLE_IMPRESSION="VIEWABLE_IMPRESSION",t.LOAD_ERROR="LOAD_ERROR",t.START_ERROR="START_ERROR",t.VIMP_1PX="VIMP_1PX",t.VIMP_100="VIMP_100",t.VIMP_100P="VIMP_100P",t.AD_MUTE="AD_MUTE",t.ADVERTISER_MUTE="ADVERTISER_MUTE",t.BOUNCE_BACK="BOUNCE_BACK",t.MUTE="MUTE"}(Gc||(Gc={})),function(t){t.MALE="M",t.FEMALE="F",t.UNKNOWN="O"}(qc||(qc={})),function(t){t[t.INTERNAL_ERROR=1e3]="INTERNAL_ERROR",t[t.INIT_ERROR=2e3]="INIT_ERROR",t[t.INIT_ERROR_INVALID_PARAM=2100]="INIT_ERROR_INVALID_PARAM",t[t.INIT_ERROR_AD_PROVIDER=2200]="INIT_ERROR_AD_PROVIDER",t[t.LOAD_ERROR=3e3]="LOAD_ERROR",t[t.LOAD_ERROR_INVALID_PARAM=3100]="LOAD_ERROR_INVALID_PARAM",t[t.LOAD_ERROR_INVALID_PARAM_AD_UNIT_ID=3110]="LOAD_ERROR_INVALID_PARAM_AD_UNIT_ID",t[t.LOAD_ERROR_INVALID_PARAM_AD_PARAM=3120]="LOAD_ERROR_INVALID_PARAM_AD_PARAM",t[t.LOAD_ERROR_WATERFALL_LIST=3200]="LOAD_ERROR_WATERFALL_LIST",t[t.LOAD_ERROR_WATERFALL_LIST_REQUEST_FAILED=3210]="LOAD_ERROR_WATERFALL_LIST_REQUEST_FAILED",t[t.LOAD_ERROR_WATERFALL_LIST_PARSE_FAILED=3220]="LOAD_ERROR_WATERFALL_LIST_PARSE_FAILED",t[t.LOAD_ERROR_AD_SELECTION=3300]="LOAD_ERROR_AD_SELECTION",t[t.LOAD_ERROR_AD_SELECTION_NO_FILL=3310]="LOAD_ERROR_AD_SELECTION_NO_FILL",t[t.LOAD_FAILED_TIMEOUT=3400]="LOAD_FAILED_TIMEOUT",t[t.START_ERROR=4e3]="START_ERROR",t[t.START_ERROR_MEDIA_START=4100]="START_ERROR_MEDIA_START",t[t.START_ERROR_MEDIA_START_FAILED=4110]="START_ERROR_MEDIA_START_FAILED",t[t.VIDEO_SCHEDULE_ERROR=9e3]="VIDEO_SCHEDULE_ERROR",t[t.VIDEO_SCHEDULE_PARAM_ERROR=9100]="VIDEO_SCHEDULE_PARAM_ERROR",t[t.VIDEO_SCHEDULE_MISSING_AD_SCHEDULE_ID_ERROR=9110]="VIDEO_SCHEDULE_MISSING_AD_SCHEDULE_ID_ERROR",t[t.VIDEO_SCHEDULE_INVALID_AD_SCHEDULE_PARAM_ERROR=9120]="VIDEO_SCHEDULE_INVALID_AD_SCHEDULE_PARAM_ERROR",t[t.VIDEO_SCHEDULE_REQUEST_ERROR=9210]="VIDEO_SCHEDULE_REQUEST_ERROR",t[t.VIDEO_SCHEDULE_PARSE_ERROR=9220]="VIDEO_SCHEDULE_PARSE_ERROR"}(Kc||(Kc={})),function(t){t.UNSPECIFIED="GFP_UNSPECIFIED_ERROR",t.NETWORK_ERROR="GFP_NETWORK_ERROR",t.SERVER_ERROR="GFP_SERVER_ERROR",t.INTERNAL_ERROR="GFP_INTERNAL_ERROR",t.ADAPTER_LOAD_TIMEOUT="GFP_ADAPTER_LOAD_TIMEOUT",t.REQUEST_TIMEOUT="GFP_REQUEST_TIMEOUT",t.NOT_REGISTERED_PROVIDER="GFP_NOT_REGISTERED_PROVIDER",t.NOT_FOUND_UNKNOWN_ADAPTER="GFP_NOT_FOUND_UNKNOWN_ADAPTER",t.NOT_FOUND_BANNER_ADAPTER="GFP_NOT_FOUND_BANNER_ADAPTER",t.NOT_FOUND_NATIVE_ADAPTER="GFP_NOT_FOUND_NATIVE_ADAPTER",t.GFP_NOT_FOUND_VIDEO_ADAPTER="GFP_NOT_FOUND_VIDEO_ADAPTER",t.MISSING_PARAM="GFP_MISSING_PARAM",t.RECEIVED_INVALID_PROPERTY="GFP_RECEIVED_INVALID_PROPERTY",t.AD_SCHEDULE_EMPTY="AD_SCHEDULE_EMPTY",t.NO_FILL="GFP_NO_FILL",t.INVALID_WATERFALL_RESPONSE="GFP_INVALID_WATERFALL_RESPONSE"}($c||($c={})),function(t){t[t.ERROR=0]="ERROR",t[t.SUCCESS=1]="SUCCESS",t[t.NO_FILL=2]="NO_FILL",t[t.TIMEOUT=3]="TIMEOUT"}(zc||(zc={})),function(t){t[t.WEB=0]="WEB",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"}(Qc||(Qc={})),function(t){t.FLUID="FLUID",t.PIXEL="PIXEL"}(Xc||(Xc={})),function(t){t.SF_LOADED="sf-loaded",t.SF_CB_REGISTERED="sf-cb-registered",t.SF_RESIZED="sf-resized",t.SF_TOUCHSTARTED="sf-touchstarted",t.SF_CLICKED="sf-clicked",t.SF_NATIVE_AD_MUTE_CLICKED="sf-native-ad-mute-clicked",t.SF_NATIVE_ADV_MUTE_CLICKED="sf-native-adv-mute-clicked",t.SF_NATIVE_SLOT_EVENT="sf-native-slot-event",t.SF_ERROR="sf-error",t.SF_INIT="sf-init",t.SF_REQUEST_RESIZE="sf-request-resize",t.SF_REQUEST_EXPAND="sf-request-expand",t.SF_REQUEST_COLLAPSE="sf-request-collapse",t.SF_AD_MUTE_COMPLETED="sf-ad-mute-completed",t.SF_AD_MUTE_STATE_CHANGED="sf-ad-mute-state-changed",t.SF_AD_MUTE_PRIVACY_CLICKED="sf-ad-mute-privacy-clicked",t.SF_AD_MUTE_TOUCHSTARTED="sf-ad-mute-touchstarted",t.SF_AD_MUTE_TOUCHENDED="sf-ad-mute-touchended",t.SF_EXPOSURE_CHANGE_SETTING="sf-exposure-change-setting",t.SF_OUTSTREAM_EVENT="sf-outstream-event",t.SF_NOTIFY_CREATIVE_META="sf-notify-creative-meta"}(Yc||(Yc={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ETHERNET=1]="ETHERNET",t[t.WIFI=2]="WIFI",t[t.CELLULAR_UNKNOWN=3]="CELLULAR_UNKNOWN",t[t.CELLULAR_2G=4]="CELLULAR_2G",t[t.CELLULAR_3G=5]="CELLULAR_3G",t[t.CELLULAR_4G=6]="CELLULAR_4G"}(Jc||(Jc={})),function(t){t.WIFI="WIFI",t.CELL="CELL"}(Zc||(Zc={})),function(t){t.CELLULAR="cellular",t.ETHERNET="ethernet",t.WIFI="wifi"}(td||(td={})),function(t){t.CELLULAR_2G="2g",t.CELLULAR_3G="3g",t.CELLULAR_4G="4g"}(ed||(ed={})),function(t){t.NDA_BANNER_SF="SF",t.NDA_BANNER_NDP="NDP",t.NDA_BANNER_JS="JS",t.GOOGLE_BANNER="GOOGLE_GPT",t.TEADS_BANNER="TEADS",t.NATIVE_SIMPLE="NS",t.NATIVE_NORMAL="NN",t.NATIVE_COMPOSITE="NC",t.NATIVE_ADVANCED="NA",t.GV="GV",t.GOOGLE_IMA="GOOGLE_IMA",t.EMPTY="EMPTY"}(nd||(nd={})),function(t){t[t.DISABLED=0]="DISABLED",t[t.ENABLED=1]="ENABLED"}(id||(id={})),function(t){t.DARK="dark",t.LIGHT="light",t.SYSTEM="system"}(rd||(rd={})),function(t){t.IMPRESSED_1PX="IMPRESSED_1PX",t.IMPRESSED_100P="IMPRESSED_100P",t.IMPRESSED_100P_WITH_DURATION_1S="IMPRESSED_100P_WITH_DURATION_1S",t.IMPRESSED_50P_WITH_DURATION_2S="IMPRESSED_50P_WITH_DURATION_2S",t.VIEWABLE_IMPRESSED="VIEWABLE_IMPRESSED",t.EXPOSURE_CHANGED="EXPOSURE_CHANGED"}(sd||(sd={})),function(t){t[t.INIT=0]="INIT",t[t.RENDERED=1]="RENDERED"}(od||(od={})),function(t){t.AD_MUTE_COMPLETED="AD_MUTE_COMPLETED",t.MUTE_STATE_CHANGED="MUTE_STATE_CHANGED",t.TOUCH_STARTED="TOUCH_STARTED",t.TOUCH_ENDED="TOUCH_ENDED"}(ad||(ad={})),function(t){t.SF="SF",t.NDP_JS="NDP_JS",t.IN_APP="IN_APP",t.NO_SUPPORT="NO_SUPPORT"}(ud||(ud={})),function(t){t.INIT="init",t.FEEDBACK_ON="feedbackOn",t.QUESTION="question",t.RESULT="result"}(cd||(cd={}));let Sd=function(){return fd(function t(e=[]){Mc(this,t),vd(this,"commands",void 0),vd(this,"isTriggerd",void 0),vd(this,"isWorking",void 0),this.commands=e,this.isTriggerd=!1,this.isWorking=!1},[{key:"push",value:function(t){this.commands.push(t),this.isTriggerd&&!this.isWorking&&this.execute()}},{key:"forceExecuteCommands",value:function(){this.isTriggerd=!0,this.isWorking||this.execute()}},{key:"execute",value:async function(){for(;this.commands.length>0;){const t=this.commands.shift();if("function"==typeof t)try{this.isWorking=!0,await t()}catch(t){}finally{this.isWorking=!1}}}}])}();const Rd=t=>!t||0===t.length||/^\s*$/.test(t),Id=t=>!Rd(t),Td=t=>{let e=t;if(null===e)return!0;if("number"==typeof e||"boolean"==typeof e||"function"==typeof e)return!1;"string"==typeof e&&(e=e.trim());for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0};let Dd=function(){return fd(function t(e,n,i){Mc(this,t),vd(this,"url",void 0),vd(this,"encrypted",void 0),vd(this,"params",void 0),this.url=e,this.encrypted=n??"",this.params=i??{}},[{key:"getCleanParams",value:function(){return Object.keys(this.params).filter(t=>t&&!Td(this.params[t])).filter(t=>"string"!=typeof this.params[t]||Id(this.params[t].toString())).reduce((t,e)=>({...t,[e]:String(this.params[e])}),{})}}])}(),kd=function(){function t(){return Mc(this,t),yd(this,t,arguments)}return Pc(t,Dd),fd(t,[{key:"callTrackingUrl",value:function(){const t=this.getBlobData();window.navigator.sendBeacon(this.url,t)}},{key:"getBlobData",value:function(){const t={...this.getCleanParams(),data:this.encrypted},e=Object.keys(t).map(e=>`${e}=${t[e]}`).join("&");return new Blob([e],{type:"application/x-www-form-urlencoded;charset=UTF-8"})}}])}();const bd=()=>window.navigator.userAgent.toLowerCase(),_d=()=>/Windows/i.test(bd()),wd=()=>/Macintosh/i.test(bd()),Ld=()=>/iPad/i.test(bd())||(()=>{const t=window.navigator;return Boolean(t&&t.platform&&(-1!==t.platform.indexOf("iPad")||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream))})(),Od=()=>/iPhone/i.test(bd())||Ld()||/iPod/i.test(bd()),Cd=()=>/Android/i.test(bd()),Pd=()=>/Windows Phone|Windows CE/i.test(bd()),Md=()=>/Tizen/i.test(bd()),Nd=()=>void 0!==window.opera||/Opera/i.test(bd()),Ud=()=>/Edg/i.test(bd()),Fd=()=>/Firefox/i.test(bd()),xd=()=>/Whale/i.test(bd()),Vd=()=>/Chrome|CriOS/i.test(bd()),Hd=()=>!/Chrome|CriOS/i.test(bd())&&(bd()||"").indexOf("safari")>-1,jd=()=>/AppleWebKit/i.test(bd()),Bd=()=>!!bd().match(/(?:(MSIE) |(Trident)\/.+rv[ :])([\w.]+)/i),Wd=()=>/NAVER\((inapp|higgs);\s?search;\s?/i.test(bd()),Gd=()=>/SamsungBrowser/i.test(bd()),qd=()=>/\bLine\b/i.test(bd()),Kd=()=>/EdgA/i.test(bd()),$d=()=>/EdgiOS/i.test(bd()),zd=()=>Bd()?"IE":Wd()?"Naver App":Gd()?"SamsungBrowser":qd()?"Line App":Kd()?"Android Edge":$d()?"IOS Edge":/IEMobile/i.test(bd())?"IE Mobile":/Opera Mini/i.test(bd())?"Opera Mini":/Dolfin/i.test(bd())?"Dolfin":Nd()?"Opera":Ud()?"Edge":Fd()?"Firefox":xd()?"Whale":Vd()?"Chrome":Hd()?"Safari":jd()?"WebKit":"an unknown browser",Qd=t=>{try{return"string"==typeof t?encodeURIComponent(t.replace(/[^\p{L}\p{N}\p{P}\p{Z}~`|$^+=<>]/gu,"")):encodeURIComponent(t)}catch(t){return""}},Xd=()=>{const t=document.location.href;return t.length>255?t.substring(0,255):t},Yd=t=>t?Array.from(t).reduce((t,[e,n])=>Object.assign(t,{[e]:n}),{}):{},Jd=t=>t.filter((t,e,n)=>n.indexOf(t)===e),Zd=t=>{if("function"==typeof structuredClone)return structuredClone(t);const e={};for(const i in t){const r=t[i];Array.isArray(r)?e[i]=r.map(t=>Zd(t)):n(r)?e[i]=Zd(r):e[i]=r}function n(t){return"object"==typeof t&&null!=t}return e},tl=()=>String(7852516352*Number("0."+el())),el=()=>{const t=new Uint32Array(1);return globalThis.crypto?.getRandomValues(t),t[0]},nl=t=>{try{return t()}catch{return null}},il=(t,e=["http:","https:"])=>{if(!t)return!1;try{const n=new URL(t);return e.includes(n.protocol)}catch{return!1}};let rl=function(){function t(){return Mc(this,t),yd(this,t,arguments)}return Pc(t,Dd),fd(t,[{key:"callTrackingUrl",value:function(){const t=this.getTrackingUrl();this.sendXHRRequest(t).then(t=>{}).catch(t=>{})}},{key:"getTrackingUrl",value:function(){let t=`${this.url}${this.encrypted}`;const e=Object.keys(this.getCleanParams()).map(t=>`${t}=${Qd(this.params[t])}`).join("&");return Td(e)||(t=`${t}?${e}`),(t=>{const e=Math.random(),n=new URL(t);return n.searchParams.append("dummy",`${e}`),n.toString()})(t)}},{key:"sendXHRRequest",value:async function(t){const{promise:e,resolve:n,reject:i}=function(){if("withResolvers"in Promise&&"function"==typeof Promise.withResolvers)return Promise.withResolvers();let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}(),r=new XMLHttpRequest;return r.open("GET",t),r.onabort=()=>i("Request Aborted"),r.onerror=()=>i("Network Error"),r.onreadystatechange=()=>{if(!r||4!==r.readyState)return;const t=r.status;if(t>=200&&t<300){const e=r.response;n({status:t,data:e})}else i("Request Failed")},r.send(),e}}])}(),sl=function(){function t(e,n,i,r){var s;return Mc(this,t),vd(s=yd(this,t,[e,n,i]),"tunnelManager",void 0),s.tunnelManager=r,s}return Pc(t,rl),fd(t,[{key:"sendXHRRequest",value:async function(e){const n=this.tunnelManager?.isValid()?await this.tunnelManager.getTunnelUrl(e):e;return(i="sendXHRRequest",r=this,s=3,o=or(sr(t.prototype),i,r),2&s&&"function"==typeof o?function(t){return o.apply(r,t)}:o)([n]);var i,r,s,o}}])}(),ol=function(){function t(){Mc(this,t)}return fd(t,null,[{key:"create",value:function(e,n,i,r){return r?.isValid()?new sl(e,n,i,r):"function"==typeof window.navigator.sendBeacon&&t.isPOSTMethod(e)?new kd(e,n,i):new rl(e,n,i)}},{key:"isPOSTMethod",value:function(t){return new RegExp(/((tivan.naver)|(t.naverads)).com\/sc\d?\/\d+/).test(t)}}])}();const al={ratio:.5,ms:1e3},ul=t=>{if(!t)return al;const e=Number(t.ms),n=Number(t.ratio);return!isNaN(e)&&!isNaN(n)&&n>=0&&n<=100?{ratio:n/100,ms:e}:al},cl={capture:!0},dl=["pageshow","focus","blur","visibilitychange","resume"];let ll=function(){return fd(function t(e){Mc(this,t),vd(this,"state",void 0),vd(this,"handler",void 0),vd(this,"checkAndUpdateState",()=>{this.setState(this.checkDocumentState())}),vd(this,"onFreeze",()=>{this.setState("frozen")}),vd(this,"onPageHide",t=>{this.setState(t.persisted?"frozen":"terminated")}),this.state=this.checkDocumentState(),this.handler=e},[{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){this.state!==t&&(this.state=t,this.dispatch(this.state))}},{key:"dispatch",value:function(t){try{this.handler(t)}catch(t){}}},{key:"checkDocumentState",value:function(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}},{key:"addWindowEvent",value:function(){dl.forEach(t=>{window.addEventListener(t,this.checkAndUpdateState,cl)}),window.addEventListener("freeze",this.onFreeze,cl),window.addEventListener("pagehide",this.onPageHide,cl)}},{key:"removeWindowEvent",value:function(){dl.forEach(t=>{window.removeEventListener(t,this.checkAndUpdateState,cl)}),window.removeEventListener("freeze",this.onFreeze,cl),window.removeEventListener("pagehide",this.onPageHide,cl)}}])}(),hl=function(){return fd(function t(e,n,i=al){Mc(this,t),vd(this,"target",void 0),vd(this,"visibilityObserverListener",void 0),vd(this,"viewableImpressionConfig",void 0),vd(this,"visibleTimeout",void 0),vd(this,"visibleTimeout100p1s",void 0),vd(this,"visibleTimeout50p2s",void 0),vd(this,"isViewableImpressed",void 0),vd(this,"isImpressed1px",void 0),vd(this,"isImpressed100p",void 0),vd(this,"isImpressed100p1s",void 0),vd(this,"isImpressed50p2s",void 0),vd(this,"isIntersecting",void 0),vd(this,"intersectionRatio",void 0),this.target=e,this.visibilityObserverListener=n,this.viewableImpressionConfig=i,this.isViewableImpressed=!1,this.isImpressed1px=!1,this.isImpressed100p=!1,this.isImpressed100p1s=!1,this.isImpressed50p2s=!1,this.isIntersecting=!1,this.intersectionRatio=0},[{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"onChangeIntersection",value:function(t,e){this.visibilityObserverListener.dispatch(sd.EXPOSURE_CHANGED,{target:this.target,isIntersecting:t,intersectionRatio:e}),this.isIntersecting=t,this.intersectionRatio=e,this.checkImpressed()}},{key:"checkImpressed",value:function(){this.checkImpressed1px(),this.checkImpressed100p(),this.checkImpressed100p1s(),this.checkImpressed50p2s(),this.checkViewableImpressed()}},{key:"checkImpressed1px",value:function(){!this.isImpressed1px&&this.intersectionRatio>0&&(this.isImpressed1px=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_1PX,{target:this.target}))}},{key:"checkImpressed100p",value:function(){this.isImpressed100p||1!==this.intersectionRatio||(this.isImpressed100p=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_100P,{target:this.target}))}},{key:"checkImpressed100p1s",value:function(){this.isImpressed100p1s||(1===this.intersectionRatio?this.visibleTimeout100p1s||(this.visibleTimeout100p1s=window.setTimeout(()=>{this.isImpressed100p1s=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_100P_WITH_DURATION_1S,{target:this.target})},1e3)):this.visibleTimeout100p1s&&(clearTimeout(this.visibleTimeout100p1s),this.visibleTimeout100p1s=void 0))}},{key:"checkImpressed50p2s",value:function(){this.isImpressed50p2s||(!this.visibleTimeout50p2s&&this.intersectionRatio>=.5?this.visibleTimeout50p2s=window.setTimeout(()=>{this.isImpressed50p2s=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_50P_WITH_DURATION_2S,{target:this.target})},2e3):this.visibleTimeout50p2s&&(clearTimeout(this.visibleTimeout50p2s),this.visibleTimeout50p2s=void 0))}},{key:"checkViewableImpressed",value:function(){this.isViewableImpressed||(this.intersectionRatio>0&&this.intersectionRatio>=this.viewableImpressionConfig.ratio?this.visibleTimeout||(this.visibleTimeout=window.setTimeout(()=>{this.isViewableImpressed=!0,this.visibilityObserverListener.dispatch(sd.VIEWABLE_IMPRESSED,{target:this.target})},this.viewableImpressionConfig.ms)):this.visibleTimeout&&(clearTimeout(this.visibleTimeout),this.visibleTimeout=void 0))}},{key:"clearTimer",value:function(){this.visibleTimeout&&(window.clearTimeout(this.visibleTimeout),this.visibleTimeout=void 0),this.visibleTimeout100p1s&&(window.clearTimeout(this.visibleTimeout100p1s),this.visibleTimeout100p1s=void 0),this.visibleTimeout50p2s&&(window.clearTimeout(this.visibleTimeout50p2s),this.visibleTimeout50p2s=void 0)}}])}(),fl=function(){function t(e,n,i){var r;return Mc(this,t),vd(r=yd(this,t,[e,n,i]),"pageLifeCycleManager",void 0),vd(r,"pageLifeCycleState",void 0),vd(r,"checkState",t=>{r.pageLifeCycleState=t,r.checkImpressed()}),r.pageLifeCycleManager=new ll(r.checkState),r}return Pc(t,hl),fd(t,[{key:"start",value:function(){this.pageLifeCycleManager.addWindowEvent()}},{key:"stop",value:function(){this.pageLifeCycleManager.removeWindowEvent()}},{key:"checkImpressed1px",value:function(){!this.isImpressed1px&&this.intersectionRatio>0&&"active"===this.pageLifeCycleState&&(this.isImpressed1px=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_1PX,{target:this.target}))}},{key:"checkImpressed100p",value:function(){this.isImpressed100p||1!==this.intersectionRatio||"active"!==this.pageLifeCycleState||(this.isImpressed100p=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_100P,{target:this.target}))}},{key:"checkImpressed100p1s",value:function(){this.isImpressed100p1s||(1===this.intersectionRatio&&"active"===this.pageLifeCycleState?this.visibleTimeout100p1s||(this.visibleTimeout100p1s=window.setTimeout(()=>{this.isImpressed100p1s=!0,this.visibilityObserverListener.dispatch(sd.IMPRESSED_100P_WITH_DURATION_1S,{target:this.target})},1e3)):this.visibleTimeout100p1s&&(clearTimeout(this.visibleTimeout100p1s),this.visibleTimeout100p1s=void 0))}},{key:"checkViewableImpressed",value:function(){this.isViewableImpressed||(this.intersectionRatio>0&&this.intersectionRatio>=this.viewableImpressionConfig.ratio&&"active"===this.pageLifeCycleState?this.visibleTimeout||(this.visibleTimeout=window.setTimeout(()=>{this.isViewableImpressed=!0,this.visibilityObserverListener.dispatch(sd.VIEWABLE_IMPRESSED,{target:this.target})},this.viewableImpressionConfig.ms)):this.visibleTimeout&&(clearTimeout(this.visibleTimeout),this.visibleTimeout=void 0))}}])}(),vl=function(){return fd(function t(){Mc(this,t),vd(this,"eventHandlers",void 0),this.eventHandlers={}},[{key:"addEventListener",value:function(t,e){const n=this.eventHandlers[t]??[];return n.push(e),this.eventHandlers[t]=n,()=>{this.removeListener(t,e)}}},{key:"dispatch",value:function(t,...e){const n=this.eventHandlers[t];n&&n.forEach(t=>{t(...e)})}},{key:"removeAllListeners",value:function(){this.eventHandlers={}}},{key:"removeListener",value:function(t,e){const n=this.eventHandlers[t];n?.length&&(this.eventHandlers[t]=n.filter(t=>t!==e))}},{key:"destroy",value:function(){this.removeAllListeners()}}])}(),pl=function(){function t(){return Mc(this,t),yd(this,t,arguments)}return Pc(t,vl),fd(t)}();const El=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];let gl=function(){return fd(function t(e,n=al,i="VIEWABLE_NORMAL"){if(Mc(this,t),vd(this,"adViewabilityMeasureType",void 0),vd(this,"visibilityObserverListener",void 0),vd(this,"visibilityCheckerMap",void 0),vd(this,"observer",void 0),vd(this,"threshold",El),this.adViewabilityMeasureType=i,!e)throw new Error("Not found ad element.");this.visibilityObserverListener=new pl,this.visibilityCheckerMap=new Map;const r=this.createVisibilityChecker(e,n);this.visibilityCheckerMap.set(e,r)},[{key:"createVisibilityChecker",value:function(t,e){return"VIEWABLE_FOCUS"===this.adViewabilityMeasureType?new fl(t,this.visibilityObserverListener,e):new hl(t,this.visibilityObserverListener,e)}},{key:"setSubAdElement",value:function(t){if(!t)throw new Error("Not found subAdElement.");this.visibilityCheckerMap.set(t,new hl(t,this.visibilityObserverListener))}},{key:"start",value:function(){this.observer||(this.observer=new IntersectionObserver(t=>{t.forEach(t=>{this.visibilityCheckerMap.get(t?.target)?.onChangeIntersection(t.isIntersecting,t.intersectionRatio)})},{threshold:this.threshold}),this.visibilityCheckerMap.forEach(t=>{t.start(),this.observer?.observe(t.target)}))}},{key:"resume",value:function(){this.visibilityCheckerMap.forEach(t=>{this.observer?.observe(t.target),t.clearTimer()})}},{key:"pause",value:function(){this.visibilityCheckerMap.forEach(t=>{this.observer?.unobserve(t.target)})}},{key:"stop",value:function(){this.observer?.disconnect(),this.observer=void 0,this.visibilityObserverListener.destroy(),this.visibilityCheckerMap.forEach(t=>{t.stop()})}},{key:"addEventListener",value:function(t,e){this.visibilityObserverListener.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.visibilityObserverListener.removeListener(t,e)}}])}(),ml=function(){return fd(function t(e){for(Mc(this,t);e.length>0;){const t=e.shift();if("function"==typeof t)try{t()}catch(t){}}},[{key:"push",value:function(t){try{t()}catch(t){}}}])}(),yl=function(){return fd(function t(e=[]){Mc(this,t),vd(this,"core",void 0),vd(this,"commands",void 0),vd(this,"isTriggered",void 0),this.commands=e,this.isTriggered=!1},[{key:"push",value:function(t){this.isTriggered?this.core?.push(t):this.commands.push(t)}},{key:"forceExecuteCommands",value:function(){this.isTriggered=!0,this.core=new ml(this.commands)}}])}();function Al(t,e="",n=""){if("function"==typeof Element.prototype.closest){const i=`a, [${e}='${n}']`;return t.closest(i)}let i=t;do{if(i instanceof HTMLAnchorElement||i.getAttribute(e)===n)return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}const Sl=()=>2===window.performance?.navigation?.type,Rl="gfp_uuid_iv";const Il=new(function(){return fd(function t(){Mc(this,t)},[{key:"getIV",value:function(){const t=nl(()=>window.localStorage.getItem(Rl));if(t)return t;const e=(()=>{const t=globalThis.crypto;return"function"==typeof t?.randomUUID?t.randomUUID():t?"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^t.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)):""})();return nl(()=>window.localStorage.setItem(Rl,e)),e}},{key:"getIVT",value:function(t){return Rd(t)||t===this.getIV()?Qc.WEB:Cd()?Qc.ANDROID:Od()?Qc.IOS:Qc.WEB}}])}());let Tl=function(){return fd(function t(e){Mc(this,t),vd(this,"eventTrackingRecord",void 0),this.eventTrackingRecord=e},[{key:"getEventTrackingUrlList",value:function(t){return(this.eventTrackingRecord[t]??[]).filter(Id)}}])}(),Dl=function(){return fd(function t(e){Mc(this,t),vd(this,"ackImpressions",void 0),vd(this,"clicks",void 0),vd(this,"renderedImpressions",void 0),vd(this,"viewableImpressions",void 0),vd(this,"loadErrors",void 0),vd(this,"startErrors",void 0),vd(this,"vimp1px",void 0),vd(this,"vimp100",void 0),vd(this,"vimp100p",void 0),vd(this,"admute",void 0),vd(this,"advmute",void 0),vd(this,"bounce",void 0),vd(this,"mute",void 0),this.ackImpressions=e?.ackImpressions??[],this.clicks=e?.clicks??[],this.renderedImpressions=e?.renderedImpressions??[],this.viewableImpressions=e?.viewableImpressions??[],this.loadErrors=e?.loadErrors??[],this.startErrors=e?.startErrors??[],this.vimp1px=e?.vimp1px,this.vimp100=e?.vimp100,this.vimp100p=e?.vimp100p,this.admute=e?.admute,this.advmute=e?.advmute,this.bounce=e?.bounce,this.mute=e?.mute},[{key:"createEventTrackingContainer",value:function(){const t=this.ackImpressions?.map(t=>t.url)??[],e=this.clicks?.map(t=>t.url)??[],n=this.renderedImpressions?.map(t=>t.url)??[],i=this.viewableImpressions?.map(t=>t.url)??[],r=this.loadErrors?.map(t=>t.url)??[],s=this.startErrors?.map(t=>t.url)??[],o=this.vimp1px?.map(t=>t.url)??[],a=this.vimp100?.map(t=>t.url)??[],u=this.vimp100p?.map(t=>t.url)??[],c=this.admute?.map(t=>t.url)??[],d=this.advmute?.map(t=>t.url)??[],l=this.bounce?.map(t=>t.url)??[],h=this.mute?.map(t=>t.url)??[];return new Tl({[Gc.ACK_IMPRESSION]:t,[Gc.CLICKED]:e,[Gc.RENDERED_IMPRESSION]:n,[Gc.VIEWABLE_IMPRESSION]:i,[Gc.LOAD_ERROR]:r,[Gc.START_ERROR]:s,[Gc.VIMP_1PX]:o,[Gc.VIMP_100]:a,[Gc.VIMP_100P]:u,[Gc.AD_MUTE]:c,[Gc.ADVERTISER_MUTE]:d,[Gc.BOUNCE_BACK]:l,[Gc.MUTE]:h})}}])}();const kl="ct",bl="t0",_l="sz",wl="rt",Ll="st",Ol="erc",Cl="ersc",Pl="erm",Ml="t1";let Nl=function(){function t({gfpEventTracking:e,providerEventTracking:n,encrypted:i,timeMap:r,tunnelManager:s}){Mc(this,t),vd(this,"gfpEventTracking",void 0),vd(this,"gfpEventTrackingContainer",void 0),vd(this,"providerEventTrackingContainer",void 0),vd(this,"encrypted",void 0),vd(this,"timeMap",void 0),vd(this,"subEventNotifiers",void 0),vd(this,"tunnelManager",void 0),this.gfpEventTracking=e,this.gfpEventTrackingContainer=new Dl(e).createEventTrackingContainer(),this.providerEventTrackingContainer=new Dl(n).createEventTrackingContainer(),this.encrypted=i??"",this.timeMap=r,this.subEventNotifiers=new Map,this.tunnelManager=s}return fd(t,[{key:"hasProviderEventByType",value:function(t){const e=this.providerEventTrackingContainer?.getEventTrackingUrlList(t);return Boolean(Array.isArray(e)&&e.length)}},{key:"getGfpEventTrackingUrlList",value:function(t){return Rd(this.encrypted)?[]:this.gfpEventTrackingContainer.getEventTrackingUrlList(t)??[]}},{key:"getProviderEventTrackingUrlList",value:function(t){return this.providerEventTrackingContainer.getEventTrackingUrlList(t)??[]}},{key:"setSubEventNotifier",value:function(e,n,i=""){this.subEventNotifiers.set(e,new t({gfpEventTracking:this.gfpEventTracking,providerEventTracking:n??new Dl,encrypted:i,timeMap:this.timeMap,tunnelManager:this.tunnelManager}))}},{key:"getSubEventNotifier",value:function(t){return this.subEventNotifiers.get(t)??null}},{key:"getAllSubEventNotifiers",value:function(){return[...this.subEventNotifiers.values()]}},{key:"fireAckImpEvent",value:function(t,e=0,n){const i=this.timeMap.calculateFromTo("request","response"),r={[Ll]:zc.SUCCESS,[kl]:t??"",[wl]:e??0,[_l]:this.convertSizeToString(n),[bl]:i};this.reportEvents(Gc.ACK_IMPRESSION,r)}},{key:"fireClickEvent",value:function(t,e){const n={[kl]:t,[_l]:this.convertSizeToString(e)};this.reportEvents(Gc.CLICKED,n)}},{key:"fireRenderedImpressionEvent",value:function(t,e){const n={[kl]:t??"",[_l]:this.convertSizeToString(e)};this.reportEvents(Gc.RENDERED_IMPRESSION,n)}},{key:"fireViewableImpressionEvent",value:function(t,e){const n=document.hasFocus()?1:2,i={[kl]:t??"",[_l]:this.convertSizeToString(e),[Ml]:n};this.reportEvents(Gc.VIEWABLE_IMPRESSION,i)}},{key:"fireLoadErrorEvent",value:function(t,e){const n=this.timeMap.calculateFromTo("request","response"),i={[wl]:t??0,[Ll]:e?.stat,[Ol]:e?.errorCode,[Cl]:e?.errorSubCode,[Pl]:e?.errorMessage,[bl]:n};this.reportEvents(Gc.LOAD_ERROR,i)}},{key:"fireStartErrorEvent",value:function(t,e){const n={[wl]:t??0,[Ll]:e?.stat,[Ol]:e?.errorCode,[Cl]:e?.errorSubCode,[Pl]:e?.errorMessage};this.reportEvents(Gc.START_ERROR,n)}},{key:"fireVImp1pxEvent",value:function(){this.getProviderEventTrackingUrlList(Gc.VIMP_1PX).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireVImp100Event",value:function(){this.getProviderEventTrackingUrlList(Gc.VIMP_100).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireVImp100pEvent",value:function(){this.getProviderEventTrackingUrlList(Gc.VIMP_100P).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireAdMuteEvent",value:function(){this.getProviderEventTrackingUrlList(Gc.AD_MUTE).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireAdvertiserMuteEvent",value:function(){this.getProviderEventTrackingUrlList(Gc.ADVERTISER_MUTE).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireAdMuteCompletedEvent",value:function(){this.reportEvents(Gc.MUTE,{})}},{key:"reportEvents",value:function(e,n){this.getGfpEventTrackingUrlList(e).forEach(e=>{t.reportEvent(e,this.encrypted,n,this.tunnelManager)}),this.getProviderEventTrackingUrlList(e).forEach(e=>{t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"fireAdditionalEvent",value:function(e){e.forEach(e=>{Id(e)&&t.reportEvent(e,void 0,void 0,this.tunnelManager)})}},{key:"convertSizeToString",value:function(t){return t?`${t.width}x${t.height}`:""}}],[{key:"reportEvent",value:function(t,e,n,i){ol.create(t,e,n,i).callTrackingUrl()}},{key:"fireNetworkErrorEvent",value:function(e,n,i,r=0){const s=Object.assign({},n,{[Ll]:i?.stat,[Ol]:i?.errorCode,[Cl]:i?.errorSubCode,[Pl]:i?.errorMessage,[wl]:r}),o=Object.entries(s).reduce((t,[e,n])=>(Td(n)||t.push(`${e}=${Qd(n)}`),t),[]).join("&"),a=zd(),u=(()=>{try{if(Bd()){if("Microsoft Internet Explorer"===navigator.appName)return parseFloat(bd().match(/MSIE ([0-9.]+)/i)[1]);if("Netscape"===navigator.appName&&null!=new RegExp("trident/.*rv[ :]([0-9]{1,}[.0-9]{0,})").exec(bd()))return parseFloat(RegExp.$1)}if(Wd()){const t=/NAVER\((inapp|higgs);\s?search;\s?([0-9\.]+);\s?([0-9\.]+)(;\s?([a-z|0-9\.]+))?\)/i;return parseFloat(bd().match(t)[3])}return Gd()?parseFloat(bd().match(/SamsungBrowser\/([0-9.]+)/i)[1]):qd()?parseFloat(bd().match(/Line\/([0-9.]+)/i)[1]):Kd()?parseInt(bd().match(/EdgA\/([0-9.]+)/i)[1]):$d()?parseInt(bd().match(/EdgiOS\/([0-9.]+)/i)[1]):Nd()?parseFloat(bd().match(/Version\/([0-9.]+)/i)[1]):Ud()?parseInt(bd().match(/Edg\/([0-9.]+)/i)[1]):Fd()?parseFloat(bd().match(/Firefox\/([0-9.]+)/i)[1]):xd()?parseFloat(bd().match(/Whale\/([0-9.]+)/i)[1]):Vd()?parseFloat(bd().match(/(Chrome|CriOS)\/([0-9.]+)/i)[2]):Hd()||jd()?parseFloat(bd().match(/Version\/([0-9.]+)/i)[1]):-1}catch(t){return-1}})(),c=_d()?"Windows":wd()?"MacOS":Od()?"IOS":Cd()?"Android":Pd()?"Windows Mobile":Md()?"Tizen":"an unknown OS",d=(()=>{try{return _d()?parseFloat(bd().match(/Windows NT ([0-9.]+)/i)[1]):wd()?parseFloat(bd().match(/Mac OS X ([\d_.]+)/i)[1].replace(/_/g,".")):Od()?parseFloat(bd().match(/OS ((\d+_?){2,3})\s/i)[1].replace(/_/g,".")):Cd()?parseFloat(bd().match(/Android ([0-9.]+)/i)[1]):Pd()?parseFloat(bd().match(/Windows Phone ([0-9.]+)|Windows Phone OS ([0-9.]+)/i)[0].match(/[0-9.]+/)[0]):Md()?parseFloat(bd().match(/Tizen ([0-9.]+)/i)[1]):-1}catch(t){return-1}})(),l={q:o,u:n.u,bn:a,bv:u,os:c,osv:d,[Ol]:i?.errorCode,[Cl]:i?.errorSubCode,[Pl]:i?.errorMessage};t.reportEvent(e,"",l)}}])}();var Ul=new WeakMap,Fl=new WeakMap,xl=new WeakMap,Vl=new WeakMap,Hl=new WeakMap;let jl=function(){function t(e,n,i,r,s){Mc(this,t),pd(this,Ul,void 0),pd(this,Fl,void 0),pd(this,xl,void 0),pd(this,Vl,void 0),pd(this,Hl,void 0),gd(Ul,this,e??Kc.INTERNAL_ERROR),gd(Fl,this,n),gd(xl,this,i),gd(Vl,this,r??zc.ERROR),gd(Hl,this,s)}return fd(t,[{key:"errorCode",get:function(){return Ed(Ul,this)}},{key:"errorSubCode",get:function(){return Ed(Fl,this)}},{key:"errorMessage",get:function(){return Ed(xl,this)}},{key:"stat",get:function(){return Ed(Vl,this)}},{key:"originalError",get:function(){return Ed(Hl,this)}}],[{key:"fromError",value:function(e,n,i,r,s){return e instanceof t?e:(e instanceof Error&&(r=r??e.message),new t(n,i,r??"Unknown error",s,e))}}])}(),Bl=function(){return fd(function t(){Mc(this,t),vd(this,"requestTimeoutId",void 0),vd(this,"endTimer",void 0)},[{key:"initTimer",value:function(t,e){return new Promise((n,i)=>{this.endTimer=n,e!==1/0&&(this.requestTimeoutId=window.setTimeout(()=>{i(t()),this.requestTimeoutId=void 0},e))})}},{key:"clearTimer",value:function(){window.clearTimeout(this.requestTimeoutId),this.endTimer?.(),this.requestTimeoutId=void 0,this.endTimer=void 0}}])}(),Wl=function(){return fd(function t({ads:e,adExtraData:n,eventTracking:i,timeMap:r}){Mc(this,t),vd(this,"adQueue",void 0),vd(this,"adExtraData",void 0),vd(this,"eventTracking",void 0),vd(this,"pickedAdapter",void 0),vd(this,"eventNotifier",void 0),vd(this,"timeMap",void 0),vd(this,"mediationTimer",void 0),this.adQueue=[...e],this.adExtraData=n,this.eventTracking=i,this.timeMap=r,this.mediationTimer=new Bl},[{key:"loadAd",value:async function(){const{requestTimeout:t}=this.getGlobalConfig(),e=()=>{const t=new jl(Kc.LOAD_FAILED_TIMEOUT,$c.REQUEST_TIMEOUT,"Request Timeout",zc.TIMEOUT),e=this.timeMap.calculateNow("request");return this.eventNotifier?.fireLoadErrorEvent(e,t),t};try{await Promise.race([this.mediationTimer.initTimer(e,t),this.processNextAd()])}finally{this.mediationTimer.clearTimer()}}},{key:"processNextAd",value:async function(){const t=this.adQueue.shift();if(!t)throw new jl(Kc.LOAD_ERROR_AD_SELECTION_NO_FILL,$c.NO_FILL,"No ad",zc.ERROR);const e=new Nl({gfpEventTracking:this.eventTracking,providerEventTracking:t.eventTracking,encrypted:t.encrypted,timeMap:this.timeMap});t.adInfo.slots?.forEach((t,n)=>{e.setSubEventNotifier(n,t.eventTracking)}),this.eventNotifier=e,t.renderType===nd.EMPTY&&this.throwEmptyRenderError(e);try{this.pickedAdapter=await this.pickAdapter(t,e),await this.pickedAdapter.requestAd()}catch{this.pickedAdapter?.destroy(),this.pickedAdapter=void 0,await this.processNextAd()}}},{key:"destroy",value:function(){this.pickedAdapter?.destroy(),this.pickedAdapter=void 0}}])}(),Gl=function(){return fd(function t(e){Mc(this,t),vd(this,"ad",void 0),vd(this,"loadTimer",void 0),vd(this,"resolve",void 0),vd(this,"reject",void 0),vd(this,"_isPending",!1),this.ad=e,this.loadTimer=new Bl},[{key:"start",value:function(){const{timeout:t}=this.ad.adInfo??{};return this.loadTimer.initTimer(()=>new jl(Kc.LOAD_ERROR_AD_SELECTION_NO_FILL,$c.ADAPTER_LOAD_TIMEOUT,`failed to respond in a timely manner. renderType: ${this.ad.renderType}, creativeType: ${this.ad.creativeType}, adProviderName: ${this.ad.adProviderName}`,zc.TIMEOUT),t||1/0).catch(t=>this.onError(t)),new Promise((t,e)=>{this._isPending=!0,this.resolve=()=>{this._isPending=!1,t()},this.reject=t=>{this._isPending=!1,e(t)}})}},{key:"isPending",get:function(){return this._isPending}},{key:"onLoaded",value:function(){this.loadTimer.clearTimer(),this.resolve?.()}},{key:"onError",value:function(t){this.loadTimer.clearTimer(),this.reject?.(t)}},{key:"destroy",value:function(){this.loadTimer.clearTimer(),this.resolve=void 0,this.reject=void 0}}])}(),ql=function(){return fd(function t(){Mc(this,t)},[{key:"pickAdapter",value:async function(t,e,n,i){try{const r=await this.tryToPickAdapter(t);return this.createAdapterInstance(r,t,e,n,i)}catch(t){const e=jl.fromError(t,Kc.INTERNAL_ERROR,$c.RECEIVED_INVALID_PROPERTY);throw n.fireLoadErrorEvent(0,e),e}}},{key:"tryToPickAdapter",value:async function(t){try{this.validateAd(t)}catch(t){throw jl.fromError(t,Kc.INTERNAL_ERROR,$c.RECEIVED_INVALID_PROPERTY)}try{return await this.getAdapterClass(t)}catch(e){if(e instanceof Error){let n;switch(t.creativeType){case Wc.BANNER:n=$c.NOT_FOUND_BANNER_ADAPTER;break;case Wc.NATIVE:n=$c.NOT_FOUND_NATIVE_ADAPTER;break;default:n=$c.NOT_FOUND_UNKNOWN_ADAPTER}throw jl.fromError(e,Kc.INTERNAL_ERROR,n,`Failed to pick adapter:${e.message}`)}}throw new Error("should not reach here")}},{key:"getAdapterClass",value:async function(t){const{renderType:e,creativeType:n}=t;let i=this.getSavedAdapterClass(e,n);if(i)return i;if(await this.importAdapter(e,n),i=this.getSavedAdapterClass(e,n),i)return i;throw new Error(`Not found adapter: RenderType[${e}], CreativeType[${n}]`)}},{key:"getSavedAdapterClass",value:function(t,e){return this.getThirdPartyAdapters().find(n=>{let i;return i=Array.isArray(n.renderType)?n.renderType?.some(e=>e===t):n.renderType===t,i&&n.creativeType===e})?.adapter}},{key:"validateAd",value:function(t){if(!t)throw new Error("Invalid ad.");if(!t.adInfo)throw new Error("Invalid adInfo.");if(!t.renderType)throw new Error("Invalid renderType.");if(!t.creativeType)throw new Error("Invalid creativeType.")}}])}(),Kl=function(){function t(e,n,i,r){var s;return Mc(this,t),vd(s=yd(this,t,[Kc.LOAD_ERROR_AD_SELECTION_NO_FILL,$c.NO_FILL,"Reached empty render type.",zc.ERROR]),"eventNotifier",void 0),vd(s,"emptyAdsObserver",void 0),vd(s,"adElement",void 0),vd(s,"waterfallImpressionConfig",void 0),s.eventNotifier=e,s.emptyAdsObserver=n,s.adElement=i,s.waterfallImpressionConfig=r,s.fireEvents(),s.observeEmptyAdElement(),s}return Pc(t,jl),fd(t,[{key:"fireEvents",value:function(){this.eventNotifier.fireAckImpEvent(null,0),this.eventNotifier.fireRenderedImpressionEvent(null)}},{key:"observeEmptyAdElement",value:function(){if(this.adElement){const t=ul(this.waterfallImpressionConfig);this.emptyAdsObserver.observe(this.adElement,t,this.eventNotifier)}}}])}();const $l=()=>{const t=(()=>{try{if(window.naverappapi)return window.naverappapi;if(window.top&&window.top!==window&&window.top.naverappapi)return window.top.naverappapi}catch{}})();if(t&&t.checknetworkstatus&&"function"==typeof t.checknetworkstatus){const e=t.checknetworkstatus();return Object.values(Zc).includes(e)?e:null}return null},zl=()=>{let t=!1;const e=$l();if(e===Zc.WIFI)return Jc.WIFI;e===Zc.CELL&&(t=!0);const n=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(n?.type)switch(n.type){case td.ETHERNET:return Jc.ETHERNET;case td.WIFI:return Jc.WIFI;case td.CELLULAR:t=!0}if(t){if(n?.effectiveType)switch(n.effectiveType){case ed.CELLULAR_2G:return Jc.CELLULAR_2G;case ed.CELLULAR_3G:return Jc.CELLULAR_3G;case ed.CELLULAR_4G:return Jc.CELLULAR_4G}return Jc.CELLULAR_UNKNOWN}return Jc.UNKNOWN},Ql=t=>{const e=Object.keys(t).reduce((e,n)=>{if(Td(n))return e;const i=t[n];if(Array.isArray(i)){if(0===i.length)return e;{const t=i.filter(t=>!Td(t));e[n]=t}}else Td(i)||(e[n]=i);return e},{});return Object.keys(e).map(t=>`${Qd(String(t).trim())}:${Qd(Array.isArray(e[t])?e[t].map(t=>String(t).trim()).join("|"):String(e[t]).trim())}`).join(",")},Xl=t=>{if(!t)return"";return Object.entries(t).reduce((t,e)=>{const[n,i]=e,r=`${n}=${Qd(i)}`;return t?`${t}&${r}`:r},"")};let Yl=function(){return fd(function t(){Mc(this,t),vd(this,"tfua",void 0),vd(this,"tfcd",void 0),vd(this,"privacySettingsConfig",void 0),this.tfua=void 0,this.tfcd=void 0,this.privacySettingsConfig={}},[{key:"getPrivacyInfo",value:function(){return{iabtcstring:this.getTCString(),iabuspstring:this.getUSPString(),tfua:this.tfua,tfcd:this.tfcd}}},{key:"setPrivacySettingsConfig",value:function(t){this.privacySettingsConfig=t;const{underAgeOfConsent:e,childDirectedTreatment:n}=t;"boolean"==typeof e&&this.setTFUA(e),"boolean"==typeof n&&this.setTFCD(n)}},{key:"getPrivacySettingsConfig",value:function(){return this.privacySettingsConfig}},{key:"setTFUA",value:function(t){this.tfua=t?1:0}},{key:"setTFCD",value:function(t){this.tfcd=t?1:0}},{key:"getTCString",value:function(){try{let t;return window.__tcfapi("getTCData",2,(e,n)=>{try{n&&(t=e.tcString)}catch{}}),t}catch{return}}},{key:"getUSPString",value:function(){try{let t;return window.__uspapi("getUSPData",1,(e,n)=>{try{n&&(t=e.uspString)}catch{}}),t}catch{return}}}])}();const Jl=[{key:"googleImaSdk",type:"javascript",src:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}];let Zl=function(){return fd(function t(){Mc(this,t),vd(this,"resources",{}),Jl.forEach(t=>{this.resources[t.key]={loaded:!1,type:t.type,src:t.src}})},[{key:"load",value:function(t,e){return"javascript"===this.resources[t]?.type?this.loadJavaScript(t,e):"css"===this.resources[t]?.type?this.loadCss(t):Promise.reject(new Error(`Received invalid type, ${this.resources[t]?.type}`))}},{key:"saveAndLoad",value:function(t,e,n,i){return Rd(t)?Promise.reject(new Error(`Received invalid key, ${t}`)):Rd(n)?Promise.reject(new Error(`Received invalid src, ${n}`)):(this.resources[t]||(this.resources[t]={loaded:!1,type:e,src:n}),this.load(t,i))}},{key:"loadJavaScript",value:function(t,e="utf-8"){return new Promise((n,i)=>{if(this.resources[t].loaded)n();else{const r=document.createElement("script");r.type="text/javascript",r.src=this.resources[t].src,r.async=!0,r.charset=e,r.onload=()=>{this.resources[t].loaded=!0,n()},r.onerror=()=>{this.resources[t].loaded=!1,i(new Error(`${this.resources[t].src} failed to load.`))},document.getElementsByTagName("head")[0].appendChild(r)}})}},{key:"loadCss",value:function(t){return new Promise((e,n)=>{if(this.resources[t].loaded)e();else{const i=document.createElement("link");i.rel="stylesheet",i.href=this.resources[t].src;const r=n=>{this.resources[t].loaded||(this.resources[t].loaded=!0,e())};i.onload=()=>r(),i.onerror=()=>{this.resources[t].loaded=!1,n(new Error(`${this.resources[t].src} failed to load.`))},document.getElementsByTagName("head")[0].appendChild(i)}})}}])}(),th=function(){return fd(function t(e){Mc(this,t),vd(this,"storage",void 0),this.storage=window[e]},[{key:"setItem",value:function(t,e){try{this.storage?.setItem(t,JSON.stringify(e))}catch(t){}}},{key:"getItem",value:function(t){const e=this.storage?.getItem(t);return e?JSON.parse(e):null}},{key:"removeItem",value:function(t){this.storage?.removeItem(t)}},{key:"setObjectItem",value:function(t,e,n){const i=this.getItem(t)??{};i[e]=n,this.setItem(t,i)}},{key:"getObjectItem",value:function(t,e){const n=this.getItem(t);return n?n[e]:null}},{key:"removeObjectItem",value:function(t,e){const n=this.getItem(t);n&&(delete n[e],this.setItem(t,n))}}])}(),eh=function(){return fd(function t(){Mc(this,t),vd(this,"innerMap",void 0),this.innerMap=new Map},[{key:"set",value:function(t,e){this.innerMap.set(t,e)}},{key:"clear",value:function(){this.innerMap=new Map}},{key:"calculateNow",value:function(t){const e=this.innerMap.get(t);return e?Date.now()-e:0}},{key:"calculateFromTo",value:function(t,e){const n=this.innerMap.get(t),i=this.innerMap.get(e);return n&&i?i-n:0}}])}(),nh=function(){return fd(function t(){Mc(this,t)},[{key:"getAppEnvironment",value:function(){try{return window.namAppSDKBridge?.getAppEnvironment()}catch(t){}}},{key:"updateNAC",value:function(t){try{window.namAppSDKBridge?.updateNAC(JSON.stringify({nac:t}))}catch(t){}}}],[{key:"isEnvironment",value:function(){return Boolean(window.namAppSDKBridge)}}])}(),ih=function(){return fd(function t(){Mc(this,t)},[{key:"updateNAC",value:function(t){this.noop()}},{key:"getAppEnvironment",value:function(){}},{key:"noop",value:function(){}}])}(),rh=function(){return fd(function t(){Mc(this,t)},[{key:"getAppEnvironment",value:async function(){try{const t=await(window.webkit?.messageHandlers?.namAppSDKBridge?.postMessage({method:"getAppEnvironment"}));if(t)return t}catch(t){}}},{key:"updateNAC",value:function(t){try{window.webkit?.messageHandlers?.namAppSDKBridge?.postMessage({method:"updateNAC",parameter:{nac:t}}).catch(()=>{})}catch(t){}}},{key:"getSkadnEventHandler",value:function(){return new sh}}],[{key:"isEnvironment",value:function(){return Boolean(window?.webkit?.messageHandlers?.namAppSDKBridge)}}])}(),sh=function(){return fd(function t(){Mc(this,t)},[{key:"sendImpressionStart",value:function(t){try{window.webkit?.messageHandlers?.namAppSDKBridge?.postMessage({method:"adWasSeen",parameter:{skadn:t}}).catch(()=>{})}catch(t){}}},{key:"sendAdClick",value:async function(t){try{const e=await(window.webkit?.messageHandlers?.namAppSDKBridge?.postMessage({method:"adWasClicked",parameter:{skadn:t}}));if(!e)return!1;const{result:n}=JSON.parse(e);return n}catch(t){return!1}}}])}(),oh=function(){return fd(function t(){Mc(this,t),vd(this,"appEnv",void 0),vd(this,"communicator",void 0),nh.isEnvironment()?this.communicator=new nh:rh.isEnvironment()?this.communicator=new rh:this.communicator=new ih},[{key:"init",value:async function(){try{const t=this.communicator.getAppEnvironment();if("string"==typeof t)this.setAppEnv(JSON.parse(t));else if(t instanceof Promise){const e=await t;e&&this.setAppEnv(JSON.parse(e))}}catch(t){}}},{key:"setAppEnv",value:function(t){this.appEnv=t}},{key:"getAppEnv",value:function(){return this.appEnv}},{key:"updateAppNAC",value:function(t){this.communicator.updateNAC(t)}},{key:"getSkadnEventHandler",value:function(){if(this.communicator instanceof rh)return this.communicator.getSkadnEventHandler()}}],[{key:"isWebAppEnvironment",value:function(){return nh.isEnvironment()||rh.isEnvironment()}}])}(),ah=function(){return fd(function t(e){Mc(this,t),vd(this,"baseURL",void 0),this.baseURL=e},[{key:"get",value:async function(t,{cancelSource:e,params:n,timeout:i,browsingTopics:r}){const s=Xl(n);let o=this.baseURL+t;o+=(-1===o.indexOf("?")?"?":"&")+s;const a=r&&"function"==typeof document.browsingTopics,u=await fetch(o,{method:"GET",credentials:"include",...a&&{browsingTopics:!0},signal:AbortSignal.any([AbortSignal.timeout(i),e.getToken()])});return await u.json()}},{key:"post",value:async function(t,{cancelSource:e,params:n,timeout:i}){const r=this.baseURL+t,s=await fetch(r,{method:"POST",credentials:"include",signal:AbortSignal.any([AbortSignal.timeout(i),e.getToken()]),body:JSON.stringify(n)});return await s.json()}},{key:"getCancelSource",value:function(){return new uh}}])}(),uh=function(){return fd(function t(){Mc(this,t),vd(this,"abortController",void 0),this.abortController=new AbortController},[{key:"isCanceled",get:function(){return this.abortController.signal.aborted}},{key:"cancel",value:function(){this.abortController.abort()}},{key:"getToken",value:function(){return this.abortController.signal}}])}(),ch=function(){return fd(function t(e){Mc(this,t),vd(this,"baseURL",void 0),this.baseURL=e},[{key:"get",value:async function(t,{cancelSource:e,params:n,timeout:i}){const r=this.generateUrlWithParams(t,n);return this.createXhr("GET",r,e,i)}},{key:"generateUrlWithParams",value:function(t,e){const n=Xl(e);let i=this.baseURL+t;return i+=(-1===i.indexOf("?")?"?":"&")+n,i}},{key:"post",value:async function(t,{cancelSource:e,params:n,timeout:i}){const r=this.baseURL+t;return this.createXhr("POST",r,e,i,JSON.stringify(n))}},{key:"createXhr",value:function(t,e,n,i,r){return new Promise((s,o)=>{let a=new XMLHttpRequest;a.open(t,e,!0),a.withCredentials=!0,a.timeout=i;const u=()=>{a&&(o(new Error("Request canceled")),a.abort(),a=null)},c=()=>{n.unsubscribe(u),a=null};a.onload=()=>{a&&(a.status>=200&&a.status<300?s(JSON.parse(a.responseText)):o(new Error(`Request failed with status code ${a.status}`)),c())},a.onabort=()=>{a&&(o(new Error("Request aborted")),c())},a.onerror=()=>{a&&(o(new Error("Network Error")),c())},a.ontimeout=()=>{a&&(o(new Error(`timeout of ${a.timeout}ms exceeded`)),c())},n.subscribe(u),a.send(r)})}},{key:"getCancelSource",value:function(){return new dh}}])}(),dh=function(){return fd(function t(){Mc(this,t),vd(this,"_isCanceled",void 0),vd(this,"listeners",void 0),this._isCanceled=!1},[{key:"subscribe",value:function(t){this._isCanceled?t():this.listeners?this.listeners.push(t):this.listeners=[t]}},{key:"unsubscribe",value:function(t){if(!this.listeners)return;const e=this.listeners.findIndex(e=>e===t);-1!==e&&this.listeners.splice(e,1)}},{key:"isCanceled",get:function(){return this._isCanceled}},{key:"cancel",value:function(){this._isCanceled=!0,this.listeners?.forEach(t=>{t()}),this.listeners=void 0}}])}(),lh=function(){return fd(function t(e){Mc(this,t),vd(this,"httpAdapter",void 0),this.httpAdapter=e},[{key:"baseURL",get:function(){return this.httpAdapter.baseURL}},{key:"get",value:async function(t,e){return this.httpAdapter.get(t,e)}},{key:"post",value:async function(t,e){return this.httpAdapter.post(t,e)}},{key:"getCancelSource",value:function(){return this.httpAdapter.getCancelSource()}}])}();let hh=function(){return fd(function t({resourceLoader:e,adMuteLibUrl:n,creativeType:i,adChoice:r,initialAdMuteState:s}){Mc(this,t),vd(this,"resourceLoader",void 0),vd(this,"adMuteLibUrl",void 0),vd(this,"creativeType",void 0),vd(this,"adChoice",void 0),vd(this,"initialAdMuteState",void 0),vd(this,"controller",void 0),vd(this,"commandProcessor",void 0),this.resourceLoader=e,this.adMuteLibUrl=n,this.creativeType=i,this.adChoice=r,this.initialAdMuteState=s??cd.INIT,this.commandProcessor=new yl},[{key:"initAdMute",value:async function(t,e,n,i){try{if(!this.isAdMuteLibLoadable())return;this.isAdMuteLibLoaded()||await this.loadAdMuteLib(),this.renderAdMute(),this.addEventListener(ad.AD_MUTE_COMPLETED,t),this.addEventListener(ad.MUTE_STATE_CHANGED,e),this.addEventListener(ad.TOUCH_STARTED,n),this.addEventListener(ad.TOUCH_ENDED,i),this.commandProcessor.forceExecuteCommands()}catch(t){}}},{key:"isAdMuteLibLoaded",value:function(){try{return Boolean(this.adMuteLib)}catch{return!1}}},{key:"isAdMuteLibLoadable",value:function(){return Boolean(this.adChoice?.mute||this.adChoice?.priv)}},{key:"adMuteLib",get:function(){const t=window.gladAdMute;if(!t)throw new Error("AdMute is not loaded.");return t}},{key:"addEventListener",value:function(t,e){this.commandProcessor.push(()=>{this.controller?.addEventListener(t,e)})}},{key:"setAdTheme",value:function(t){this.commandProcessor.push(()=>{this.adMuteLib.setAdTheme(t)})}},{key:"destroy",value:function(){this.commandProcessor.push(()=>{this.controller?.destroy()})}},{key:"shouldRemoveAdMarkLegacy",value:function(){return Boolean(this.adChoice?.mute||this.adChoice?.priv)}},{key:"setPrivacyClickHandler",value:function(t){this.commandProcessor.push(()=>{this.controller?.setPrivacyClickHandler(t)})}}],[{key:"replaceAdmToRemoveAdMarkLegacy",value:function(t){return t.replace(/data-gfp-role=(\\?"|\\?')adMarkLegacy(\\?"|\\?')/g,"$& style=$1display:none;$2")}}])}(),fh=function(){function t(e){var n;return Mc(this,t),vd(n=yd(this,t,[e]),"adDivId",void 0),n.adDivId=e.adDivId,n}return Pc(t,hh),fd(t,[{key:"loadAdMuteLib",value:function(){return this.resourceLoader.saveAndLoad("adMute","javascript",this.adMuteLibUrl)}},{key:"renderAdMute",value:function(){this.controller=this.adMuteLib.createAdMuteController({muteUrl:this.adChoice?.mute,privacyUrl:this.adChoice?.priv,adDivId:this.adDivId,creativeType:this.creativeType,runtimeType:ud.NDP_JS,muteState:this.initialAdMuteState}),this.controller.render()}},{key:"setAdThemeByHostMeta",value:function(t){if(!t)return;const e=t.get("theme");e&&"string"==typeof e&&this.setAdTheme(e)}}])}(),vh=function(){return fd(function t({httpClient:e,adCallParams:n,timeout:i,cancelSource:r}){Mc(this,t),vd(this,"httpClient",void 0),vd(this,"adCallParams",void 0),vd(this,"timeout",void 0),vd(this,"cancelSource",void 0),this.httpClient=e,this.adCallParams=n,this.timeout=i,this.cancelSource=r},[{key:"execute",value:async function(){const t=new eh;t.set("request",Date.now());try{const e=await this.requestAdInternal();if(!e)throw new jl(Kc.LOAD_ERROR_WATERFALL_LIST_REQUEST_FAILED,$c.INVALID_WATERFALL_RESPONSE,"Empty waterfall response",zc.ERROR);return t.set("response",Date.now()),{adResponse:e,timeMap:t}}catch(t){if(t instanceof jl)throw t;const e=this.cancelSource?.isCanceled;if(e)return;throw jl.fromError(t,Kc.LOAD_ERROR_WATERFALL_LIST_REQUEST_FAILED,$c.NETWORK_ERROR)}}},{key:"requestAdInternal",value:function(){return this.httpClient.get("/gfp/v1",{params:this.adCallParams,timeout:this.timeout,cancelSource:this.cancelSource,browsingTopics:!0})}}])}(),ph=function(){return fd(function t(e,n){Mc(this,t),vd(this,"adUnitId",void 0),vd(this,"adElementId",void 0),vd(this,"cancelSource",void 0),this.adUnitId=e,this.adElementId=n},[{key:"build",value:function(){const t=this.buildAdRequestProps();return{adRequest:new vh(t),cancelSource:t.cancelSource}}},{key:"buildAdCallParams",value:function(){const{appName:t,appVersion:e,webAppVersion:n,yob:i,gender:r,uct:s,uid:o,ai:a,iv:u}=this.getGlobalConfig(),{name:c,version:d}=this.getSdkInfo(),l=this.getCustomParams(),h=this.getPrivacyParams(),f=t||(window.location?.hostname??""),v=document.referrer?.substring(0,255)??"",p=window.location?.href?.substring(0,255)??"",{tfua:E,tfcd:g}=h,m=1===E||1===g,y=oh.isWebAppEnvironment()?1:0,A={u:this.adUnitId,xdid:this.adElementId,p:Ql(l),an:f,av:e,wv:n,yob:i,g:r,uct:s,uid:o,r:v,c:p,sn:c,sv:d,nt:zl(),iv:u||Il.getIV(),ivt:Il.getIVT(u),sa:id.DISABLED,rui:el(),br:y,...h};return m||(A.ai=a),A}},{key:"buildAdRequestProps",value:function(){const{requestTimeout:t}=this.getGlobalConfig(),e=Object.entries(this.buildAdCallParams()).reduce((t,[e,n])=>(Td(n)||(t[e]=n),t),{}),n=this.getHttpClient(),i=n.getCancelSource();return{adCallParams:e,httpClient:n,timeout:t,cancelSource:i}}}])}(),Eh=function(){return fd(function t(){Mc(this,t),vd(this,"emptyAds",void 0),vd(this,"observer",void 0),vd(this,"intersectionObserverCallback",t=>{t.forEach(t=>{const e=this.emptyAds.get(t.target);if(!e)return;const{viewableImpressionConfig:n,eventNotifier:i,timer:r}=e;if(t.isIntersecting&&t.intersectionRatio>=n.ratio){if(r)return;const s=window.setTimeout(()=>{i.fireViewableImpressionEvent(null),this.unobserve(t.target)},n.ms);this.emptyAds.set(t.target,{...e,timer:s})}else window.clearTimeout(r),this.emptyAds.set(t.target,{...e,timer:void 0})})}),this.emptyAds=new WeakMap,this.observer=new IntersectionObserver(this.intersectionObserverCallback,{threshold:[0,.5,1]})},[{key:"observe",value:function(t,e,n){const i=ul(e);this.emptyAds.set(t,{viewableImpressionConfig:i,eventNotifier:n,timer:void 0}),this.observer.observe(t)}},{key:"unobserve",value:function(t){this.emptyAds.has(t)&&(this.emptyAds.delete(t),this.observer.unobserve(t))}}])}();const gh=()=>{let t="null"===window.origin?null:window.origin;return Bd()&&(t=t??window.location?.origin),t??"*"},mh=(t,e)=>t?e:gh();function yh(t,e,n,i){var r=or(sr(t.prototype),e,n);return"function"==typeof r?function(t){return r.apply(n,t)}:r}function Ah(t,e,n){return e=sr(e),Vu(t,Sh()?Reflect.construct(e,n||[],sr(t).constructor):e.apply(t,n))}function Sh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Sh=function(){return!!t})()}let Rh=function(){return fd(function t(e,n){Mc(this,t),vd(this,"maxDedupReqCount",void 0),vd(this,"exclusionCriteriaList",void 0),this.maxDedupReqCount=e,this.exclusionCriteriaList=n,this.dequeue()},[{key:"accumulateExclusionCriteria",value:function(t){if(!t)return;const{advertiserDomains:e,adDuplicationKeys:n}=t;Td(e)&&Td(n)||(this.exclusionCriteriaList.push(t),this.dequeue())}},{key:"mergeIntoExclusionCriteria",value:function(){const t=[],e=[];return this.exclusionCriteriaList.forEach(n=>{t.push(...n.adDuplicationKeys),e.push(...n.advertiserDomains)}),{adDuplicationKeys:Jd(t),advertiserDomains:Jd(e)}}},{key:"dequeue",value:function(){if(-1!==this.maxDedupReqCount)for(;this.exclusionCriteriaList.length>this.maxDedupReqCount;)this.exclusionCriteriaList.shift()}}])}();var Ih;!function(t){t[t.ADAPTER_PICKED=0]="ADAPTER_PICKED",t[t.AD_LOADED=1]="AD_LOADED",t[t.AD_RENDERED=2]="AD_RENDERED",t[t.AD_CLICKED=3]="AD_CLICKED",t[t.AD_IMPRESSED=4]="AD_IMPRESSED",t[t.AD_MUTE_COMPLETED=5]="AD_MUTE_COMPLETED",t[t.AD_MUTE_STATE_CHANGED=6]="AD_MUTE_STATE_CHANGED",t[t.CREATIVE_META_CHANGED=7]="CREATIVE_META_CHANGED",t[t.LOAD_ERROR=8]="LOAD_ERROR",t[t.START_ERROR=9]="START_ERROR"}(Ih||(Ih={}));let Th=function(){function t(){return Mc(this,t),Ah(this,t,arguments)}return Pc(t,vl),fd(t)}();var Dh;!function(t){t[t.NOT_DETERMINED=0]="NOT_DETERMINED",t[t.RESTRICTED=1]="RESTRICTED",t[t.DENIED=2]="DENIED",t[t.AUTHORIZED=3]="AUTHORIZED"}(Dh||(Dh={}));var kh;!function(t){t.PLAY="play",t.PAUSE="pause",t.ENDED="ended",t.MUTE="mute"}(kh||(kh={}));const bh="da_dom_id";let _h=function(){function t(e,n){var i;return Mc(this,t),vd(i=Ah(this,t,[e.adUnitId,e.adSlotElementId]),"adRequestOptions",void 0),vd(i,"store",void 0),vd(i,"adDeduplicationChunk",void 0),vd(i,"nac",void 0),vd(i,"pbjsTargeting",void 0),vd(i,"apsTargeting",void 0),i.adRequestOptions=e,i.store=n,i}return Pc(t,ph),fd(t,[{key:"withAdDeduplicationChunk",value:function(t){return this.adDeduplicationChunk=t,this}},{key:"withNAC",value:function(t){return this.nac=t,this}},{key:"withPbjsTargeting",value:function(t){return this.pbjsTargeting=t,this}},{key:"withApsTargeting",value:function(t){return this.apsTargeting=t,this}},{key:"getSdkInfo",value:function(){const{globalEnv:t}=this.store;return{name:"web",version:t.version}}},{key:"getGlobalConfig",value:function(){const{globalConfig:t}=this.store;return t}},{key:"getCustomParams",value:function(){const{customParam:t}=this.store;return{...t,...this.adRequestOptions.customParam,[bh]:this.adRequestOptions.adSlotElementId}}},{key:"getPrivacyParams",value:function(){const{privacyManager:t}=this.store;return t.getPrivacyInfo()}},{key:"buildAdCallParams",value:function(){const e=yh(t,"buildAdCallParams",this)([]),{segmentForABT:n,contentId:i}=this.store,r=this.adDeduplicationChunk?.mergeIntoExclusionCriteria(),s=r?.advertiserDomains.map(t=>Qd(t)).join("|"),o=r?.adDuplicationKeys.map(t=>Qd(t)).join("|"),a=this.store.appSDKCommunicator.getAppEnv()?.skadn,u=a?.skAdNetworkVersion??null,c=a?.skAdNetworkIds??null,d=Td(u)||Td(c)?0:1,l=this.getContentInfoString(),h=Qd(n??"");return{...e,ba:s,bx:o,hc:this.getApsTargetingString(),hb:this.getPbjsTargetingString(),sa:d,cti:l,nid:i,abt:h,nc:this.nac}}},{key:"getContentInfoString",value:function(){const t=this.adRequestOptions.contentInfo;if(!t)return;const{sourceType:e,sourceSubType:n,sourceId:i}=t;return Ql({st:e,sst:n,si:i})}},{key:"getApsTargetingString",value:function(){const t=this.apsTargeting;if(!t)return;const e={amznbid:t.amznbid??"",amzniid:t.amzniid??"",amznsz:t.amznsz??"",amznp:t.amznp??"",slotID:t.slotID??""};return Ql({...e})}},{key:"getPbjsTargetingString",value:function(){const t=this.pbjsTargeting;if(!t)return;const e=t.reduce((t,e)=>{const n=e.adserverTargeting;return Object.keys(t).forEach(e=>{const i=e;n[i]&&t[i].push(n[i])}),t},{hb_pb:[],hb_format:[],hb_size:[],hb_bidder:[],hb_adid:[]});return Ql({...e})}}])}();const wh=Symbol(),Lh=Object.freeze({importAdapter:wh});let Oh=function(){return fd(function t({store:e,adUnitId:n,adSlotElementId:i,customParam:r,ad:s,adExtraData:o,eventNotifier:a,adSlotListener:u,isPersist:c}){Mc(this,t),vd(this,"store",void 0),vd(this,"adUnitId",void 0),vd(this,"adSlotElementId",void 0),vd(this,"customParam",void 0),vd(this,"ad",void 0),vd(this,"adExtraData",void 0),vd(this,"eventNotifier",void 0),vd(this,"adSlotListener",void 0),vd(this,"isPersist",void 0),vd(this,"adContainer",void 0),vd(this,"visibilityObserver",void 0),vd(this,"currState",jc.PICKED),vd(this,"timeMap",void 0),vd(this,"adapterLoadWatcher",void 0),vd(this,"renderConfig",void 0),vd(this,"clickHandler",void 0),vd(this,"exposureChangeHandler",({isIntersecting:t,intersectionRatio:e})=>{this.adExposureChanged(t,e)}),this.store=e,this.adUnitId=n,this.adSlotElementId=i,this.customParam=r,this.ad=s,this.adExtraData=o,this.eventNotifier=a,this.adSlotListener=u,this.isPersist=c,this.adContainer=document.getElementById(i);const d=ul(this.adExtraData.waterfallResponseConfig?.imp);try{this.visibilityObserver=new gl(this.adContainer,d)}catch{this.visibilityObserver=null}this.timeMap=new eh,this.timeMap.set("picked",Date.now()),this.adapterLoadWatcher=new Gl(s)},[{key:"getAdContext",value:function(){return this.ad.adInfo.adContext}},{key:"getAdProviderName",value:function(){return this.ad.adProviderName}},{key:"getCreativeType",value:function(){return this.ad.creativeType}},{key:"getNativeAdVisualId",value:function(){return this.ad?.adInfo?.adStyle?.visual?.id}},{key:"setRenderConfig",value:function(t){this.renderConfig=t}},{key:"setClickHandler",value:function(t){this.clickHandler=t}},{key:"invokeClickHandler",value:async function(t,e,n){const i=this.clickHandler&&"function"==typeof this.clickHandler,r=this.store.appSDKCommunicator.getSkadnEventHandler();if(this.ad.adInfo?.skadn&&r){if(await r.sendAdClick(this.ad.adInfo.skadn))return;if(i)this.clickHandler?.(t,e,n);else{const e=document.createElement("a");e.href=t,e.target="_blank",e.click()}}else i&&this.clickHandler?.(t,e,n)}},{key:"requestAd",value:async function(){this.changeState(jc.REQUESTED);try{this.onCheckAndSetAdParam()}catch(t){const e=jl.fromError(t,Kc.INTERNAL_ERROR,$c.RECEIVED_INVALID_PROPERTY);throw this.adError(e),e}try{await Promise.all([this.adapterLoadWatcher.start(),this.loadAdapterAd()])}catch(t){const e=jl.fromError(t,Kc.LOAD_ERROR,$c.UNSPECIFIED);throw this.adError(e),e}}},{key:"onCheckAndSetAdParam",value:function(){if(!this.adContainer)throw new Error(`Not found '${this.adSlotElementId}' Element.`);this.adContainer.innerHTML=""}},{key:"savePersistAd",value:function(){const{globalConfig:t,persistenceStore:e}=this.store;t.enablePersistAd&&e.setAd(`${Xd()}_${this.adSlotElementId}`,{ad:this.ad,adExtraData:this.adExtraData})}},{key:"handleExposureChangeSetting",value:function(t){t?this.visibilityObserver?.addEventListener(sd.EXPOSURE_CHANGED,this.exposureChangeHandler):this.visibilityObserver?.removeEventListener(sd.EXPOSURE_CHANGED,this.exposureChangeHandler)}},{key:"changeState",value:function(t){this.currState=t,this.store.logger.changeState(t,this.adSlotElementId)}},{key:"adLoaded",value:function(){if(this.changeState(jc.LOADED),this.timeMap.set("loaded",Date.now()),this.adapterLoadWatcher.onLoaded(),!this.isPersist){const t=this.timeMap.calculateFromTo("picked","loaded");this.eventNotifier?.fireAckImpEvent(this.getCreativeType(),t,this.getSize()),this.adSlotListener.dispatch(Ih.AD_LOADED)}this.store.extensionBridge.sendAdLoadEvent({adSlotElementId:this.adSlotElementId,adUnitId:this.adUnitId,encrypted:this.ad.encrypted})}},{key:"adRendered",value:function(t=!1){this.changeState(jc.RENDERED),this.timeMap.set("rendered",Date.now()),t||this.adExtraData.renderedImpressed||(this.adRenderedImpressed(),this.adExtraData.renderedImpressed=!0,this.savePersistAd()),this.resetContainerHeight(),this.adSlotListener.dispatch(Ih.AD_RENDERED)}},{key:"adClicked",value:function(t){this.eventNotifier?.fireClickEvent(this.getCreativeType(),this.getSize()),this.store.extensionBridge.sendAdClickEvent({adSlotElementId:this.adSlotElementId,adUnitId:this.adUnitId,encrypted:this.ad.encrypted}),this.adSlotListener.dispatch(Ih.AD_CLICKED,{slotIndex:t})}},{key:"adRenderedImpressed",value:function(){this.eventNotifier?.fireRenderedImpressionEvent(this.getCreativeType(),this.getSize()),this.store.extensionBridge.sendAdRenderEvent({adSlotElementId:this.adSlotElementId,adUnitId:this.adUnitId,encrypted:this.ad.encrypted})}},{key:"adViewableImpressed",value:function(){if(this.eventNotifier?.fireViewableImpressionEvent(this.getCreativeType(),this.getSize()),this.adSlotListener.dispatch(Ih.AD_IMPRESSED),this.store.extensionBridge.sendAdViewableImpressEvent({adSlotElementId:this.adSlotElementId,adUnitId:this.adUnitId,encrypted:this.ad.encrypted}),this.ad.adInfo.skadn){const t=this.store.appSDKCommunicator.getSkadnEventHandler();t?.sendImpressionStart(this.ad.adInfo.skadn)}}},{key:"adError",value:function(t){switch(this.store.neloLogger.logMethodFrequently({method:`DisplayAdAdapter.adError(${jc[this.currState]})`,stace:t.errorMessage,sampleRate:1/60*.01}),this.store.extensionBridge.sendAdErrorEvent({adSlotElementId:this.adSlotElementId,adUnitId:this.adUnitId,encrypted:this.ad.encrypted},{message:t.errorMessage,state:jc[this.currState]}),this.currState){case jc.PICKED:case jc.REQUESTED:this.adapterLoadWatcher.isPending?this.adapterLoadWatcher.onError(t):this.eventNotifier.fireLoadErrorEvent(this.timeMap.calculateNow("picked"),t);break;case jc.LOADED:case jc.AD_START_REQUESTED:case jc.RENDERED:this.eventNotifier.fireStartErrorEvent(this.timeMap.calculateNow("rendered"),t),this.adSlotListener.dispatch(Ih.START_ERROR,{error:t});case jc.DESTROYED:}}},{key:"adExposureChanged",value:function(t,e){}},{key:"clearVisibilityObserver",value:function(){this.visibilityObserver?.stop()}},{key:"fixContainerHeight",value:function(){if(this.currState===jc.RENDERED&&null===this.adContainer?.getAttribute(Ch)){const t=this.adContainer.style.height;this.adContainer.setAttribute(Ch,t),this.adContainer.style.height=this.adContainer.getBoundingClientRect().height+"px"}}},{key:"resetContainerHeight",value:function(){if(!this.adContainer)return;const t=this.adContainer.getAttribute(Ch);null!==t&&(this.adContainer.style.height=t,this.adContainer.removeAttribute(Ch))}},{key:"clearAdContainer",value:function(){for(;this.adContainer?.firstChild;)this.adContainer.removeChild(this.adContainer.firstChild)}},{key:"destroy",value:function(){this.changeState(jc.DESTROYED),this.adapterLoadWatcher.destroy(),this.clearVisibilityObserver()}}])}();const Ch="data-gfp-original-height";let Ph=function(){function t(e){var n;return Mc(this,t),vd(n=Ah(this,t,[e]),"isFluid",void 0),n.isFluid=n.ad.layoutType===Xc.FLUID,n}return Pc(t,Oh),fd(t,[{key:"adRendered",value:function(e=!1){yh(t,"adRendered",this)([e]),this.adExtraData.viewableImpressed||this.visibilityObserver?.addEventListener(sd.VIEWABLE_IMPRESSED,()=>{this.adViewableImpressed(),this.adExtraData.viewableImpressed=!0,this.savePersistAd()}),this.visibilityObserver?.start()}},{key:"destroy",value:function(){yh(t,"destroy",this)([]),this.clearAdContainer()}}])}(),Mh=function(){function t(e){return Mc(this,t),Ah(this,t,[e])}return Pc(t,Oh),fd(t,[{key:"getSize",value:function(){}},{key:"adLoaded",value:function(){if(yh(t,"adLoaded",this)([]),!this.isPersist){const t=this.timeMap.calculateFromTo("picked","loaded");this.eventNotifier?.getAllSubEventNotifiers()?.forEach(e=>{e.fireAckImpEvent(this.getCreativeType(),t,this.getSize())})}}},{key:"adRendered",value:function(e=!1){yh(t,"adRendered",this)([e]),this.adExtraData.viewableImpressed||this.visibilityObserver?.addEventListener(sd.VIEWABLE_IMPRESSED,()=>{this.adViewableImpressed(),this.adExtraData.viewableImpressed=!0,this.savePersistAd()}),this.adExtraData.viewable1pxImpressed||this.visibilityObserver?.addEventListener(sd.IMPRESSED_1PX,()=>{this.adViewable1pxImpressed(),this.adExtraData.viewable1pxImpressed=!0,this.savePersistAd()}),this.adExtraData.viewable100Impressed||this.visibilityObserver?.addEventListener(sd.IMPRESSED_100P,()=>{this.adViewable100Impressed(),this.adExtraData.viewable100Impressed=!0,this.savePersistAd()}),this.adExtraData.viewable100pImpressed||this.visibilityObserver?.addEventListener(sd.IMPRESSED_100P_WITH_DURATION_1S,()=>{this.adViewable100pImpressed(),this.adExtraData.viewable100pImpressed=!0,this.savePersistAd()}),this.visibilityObserver?.start()}},{key:"adViewable1pxImpressed",value:function(){this.eventNotifier?.fireVImp1pxEvent()}},{key:"adViewable100Impressed",value:function(){this.eventNotifier?.fireVImp100Event()}},{key:"adViewable100pImpressed",value:function(){this.eventNotifier?.fireVImp100pEvent()}}])}(),Nh=function(){return fd(function t(e,n){Mc(this,t),vd(this,"version",void 0),vd(this,"phase",void 0),vd(this,"enabled",void 0),this.version=e,this.phase=n,this.enabled=!1},[{key:"tryHandshake",value:function(){const t=e=>{"gfp-ad-extension-pong"===e.data.type&&(this.enable(),window.removeEventListener("message",t))};window.addEventListener("message",t),window.postMessage({type:"gfp-ad-extension-ping",data:{version:this.version,phase:this.phase}})}},{key:"enable",value:function(){this.enabled=!0}},{key:"sendWaterfallResponse",value:function(t){this.enabled&&window.postMessage({type:"gfp-ad-extension-waterfall",data:{waterfall:t,version:this.version,phase:this.phase}})}},{key:"sendAdLoadEvent",value:function(t){this.enabled&&window.postMessage({type:"gfp-ad-extension-ad-loaded",data:t})}},{key:"sendAdRenderEvent",value:function(t){this.enabled&&window.postMessage({type:"gfp-ad-extension-ad-rendered",data:t})}},{key:"sendAdClickEvent",value:function(t){this.enabled&&window.postMessage({type:"gfp-ad-extension-ad-clicked",data:t})}},{key:"sendAdViewableImpressEvent",value:function(t){this.enabled&&window.postMessage({type:"gfp-ad-extension-ad-viewable-impressed",data:t})}},{key:"sendAdErrorEvent",value:function(t,e){this.enabled&&window.postMessage({type:"gfp-ad-extension-ad-error",data:t,error:e})}}])}();const Uh={production:{url:"https://kr-col-ext.nelo.navercorp.com/_store",txtToken:"118cdcf6554c4b0ea95c92784cf3e054",projectName:"Pcf3b65_AdSDKDev-web-method"},development:{url:"https://dev-col-tcp.nelo.navercorp.com/_store",txtToken:"5b0f2d6f111f4243a6b2a7f59ec06df4",projectName:"Pecb3ef_AdSDKWeb"}};let Fh=function(){return fd(function t(e,n){Mc(this,t),vd(this,"phase",void 0),vd(this,"version",void 0),vd(this,"isSelected",void 0),vd(this,"hitMap",{}),this.phase=e,this.version=n,this.isSelected=Math.random()<1e-5},[{key:"log",value:function(t){const{projectName:e,txtToken:n,url:i}="production"===this.phase||"staging"===this.phase?Uh.production:Uh.development;try{window.navigator.sendBeacon(i,JSON.stringify({txtToken:n,projectName:e,projectVersion:this.version,hostname:window.location.hostname,href:window.location.href,phase:this.phase,ua:navigator.userAgent,...t})),this.hitMap[t.method]=!0}catch(t){}}},{key:"logMethodUniquely",value:function(t){const e="production"!==this.phase,n=this.isSelected,i=e||n;!this.hitMap[t.method]&&i&&this.log(t)}},{key:"logMethodFrequently",value:function(t){const e="production"!==this.phase,n="number"==typeof t.sampleRate&&Math.random()<t.sampleRate;(e||n)&&this.log(t)}}])}();const xh="gladsdk_stored_ad",Vh="gladsdk_bounce_back_meta";let Hh=function(){function t(){return Mc(this,t),Ah(this,t,["sessionStorage"])}return Pc(t,th),fd(t,[{key:"setAd",value:function(t,e){const n={regDate:new Date,savedAd:e};this.setObjectItem(xh,t,n)}},{key:"getAd",value:function(t){const e=this.getObjectItem(xh,t);if(!e)return null;const n=e.regDate;return new Date((new Date).setHours(0,0,0,0))>new Date(n)?null:e.savedAd}},{key:"setBounceBackUrls",value:function(t){Td(t)||this.setItem(Vh,{bounceUrls:t,timestamp:Number(new Date)})}},{key:"getBounceBackMeta",value:function(){return this.getItem(Vh)}},{key:"clearBounceBackMeta",value:function(){this.removeItem(Vh)}}])}(),jh=function(){return fd(function t(e,n="production"){Mc(this,t),vd(this,"globalConfig",void 0),vd(this,"phase",void 0),vd(this,"globalEnv",void 0),vd(this,"thirdPartyAdapters",void 0),vd(this,"hostMeta",void 0),vd(this,"forceSafeFrame",void 0),vd(this,"customParam",void 0),vd(this,"segmentForABT",void 0),vd(this,"contentId",void 0),vd(this,"debug",void 0),vd(this,"resourceLoader",void 0),vd(this,"persistenceStore",void 0),vd(this,"privacyManager",void 0),vd(this,"extensionBridge",void 0),vd(this,"appSDKCommunicator",void 0),vd(this,"logger",void 0),vd(this,"neloLogger",void 0),this.globalConfig=e,this.phase=n,this.globalEnv=this.getGlobalEnv(),this.thirdPartyAdapters=[],this.hostMeta=new Map,this.forceSafeFrame=!1,this.debug=!1,this.resourceLoader=new Zl,this.persistenceStore=new Hh,this.privacyManager=new Yl,this.extensionBridge=new Nh(this.globalEnv.version,this.phase),this.logger=this.getLogger(),this.appSDKCommunicator=new oh,this.appSDKCommunicator.init(),this.neloLogger=new Fh(this.phase,this.globalEnv.version)},[{key:"setGlobalConfig",value:function(t){this.globalConfig=Object.assign({},this.globalConfig,t)}},{key:"setPhase",value:function(t){this.phase=t,this.debug=!0,this.globalEnv=this.getGlobalEnv(!0)}},{key:"setForceSafeFrame",value:function(t){this.forceSafeFrame=t}},{key:"setCustomParam",value:function(t,e){const n=this.customParam;this.customParam=Object.assign({},n,{[t]:e})}},{key:"setPrivacySettings",value:function(t){this.privacyManager.setPrivacySettingsConfig(t)}},{key:"setSegmentForABT",value:function(t){this.segmentForABT=t}},{key:"setContentId",value:function(t){this.contentId=t}},{key:"addThirdPartyAdapter",value:function(t){this.thirdPartyAdapters.push(t)}}])}();var Bh;function Wh(t,e,n,i){var r=or(sr(t.prototype),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function Gh(t,e,n){qh(t,e),e.set(t,n)}function qh(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kh(t,e){return t.get(zh(t,e))}function $h(t,e,n){return t.set(zh(t,e),n),n}function zh(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Qh(t,e,n){return e=sr(e),Vu(t,Xh()?Reflect.construct(e,n||[],sr(t).constructor):e.apply(t,n))}function Xh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Xh=function(){return!!t})()}const Yh=nl(()=>atob(String("aHR0cHM6Ly90ZXN0LnRpdmFuLm5hdmVyLmNvbQ==")))||"",Jh=nl(()=>atob(String("aHR0cHM6Ly9iZXRhLW5hbS52ZXRhLm5hdmVyLmNvbQ==")))||"",Zh=nl(()=>atob(String("aHR0cHM6Ly90ZXN0LWltZy50dmV0YS5uYXZlci5uZXQ=")))||"",tf=t=>{switch(t){case"staging":case"production":return"https://ssl.pstatic.net/melona";case"test":case"local":case"demo":return Zh;default:return String("https://ssl.pstatic.net/tveta/libs/glad/prod")}},ef=t=>{switch(t){case"staging":case"production":return"https://tivan.naver.com";default:return Yh}},nf=(t,e)=>{if(!e)return String("https://nam.veta.naver.com");switch(t){case"test":case"test2":return Jh;case"staging":case"production":return"https://nam.veta.naver.com";default:return String("https://nam.veta.naver.com")}},rf=t=>{const e=tf(t);switch(t){case"test":return`${e}/libs/glad_admute/test/glad-admute.js`;case"staging":return`${e}/libs/glad_admute/stg/glad-admute.js`;case"production":return`${e}/libs/glad_admute/prod/glad-admute.js`;default:return`${Zh}/libs/glad_admute/test/glad-admute.js`}},sf=t=>{const e=tf(t);switch(t){case"test":case"staging":case"production":return`${e}/libs/gfp-nac-module/synchronizer.js`;default:return`${Zh}/libs/gfp-nac-module/synchronizer.js`}},of=(t,e)=>{const n=String("3.7.1"),i="https://ssl.pstatic.net/tveta/libs/glad/prod/3.7.1",r=new URL(i).origin;return Object.freeze({version:n,phase:t,gfp:{chunkUrl:i,cdnDomain:r,adCallUrl:nf(t,e),cdnUrl:tf(t),safeFrameContainerUrl:`${i}/res/r.html`,adMuteLibUrl:rf(t),nacModuleUrl:sf(t),devtoolsUrl:`${i}/devtools/index.html`},tivan:{url:ef(t)}})};let af=function(){return fd(function t(){Mc(this,t)},null,[{key:"getLogger",value:function(){return this.universalLogger}},{key:"addLogger",value:function(t){const e=new t(of("production"));return this.loggers.push(e),this.cmd.forceExecuteCommands(),e}},{key:"callLoggerMethod",value:function(t,...e){this.cmd.push(()=>{for(const n of this.loggers){const i=n[t];"function"==typeof i&&i.apply(n,e)}})}}])}();Bh=af,vd(af,"universalLogger",void 0),vd(af,"loggers",void 0),vd(af,"cmd",void 0),Bh.universalLogger=new Proxy({},{get:(t,e)=>(...t)=>Bh.callLoggerMethod(e,...t)}),Bh.loggers=[],Bh.cmd=new yl;const uf=af.getLogger(),cf={requestTimeout:6e4,language:"en",appName:window.location?.hostname,enablePersistAd:!1,maxDedupReqCount:-1,adViewabilityMeasureType:"VIEWABLE_NORMAL"};const df=new(function(){function t(){var e;return Mc(this,t),vd(e=Qh(this,t,[cf,"production"]),"emptyAdsObserver",void 0),e.emptyAdsObserver=new Eh,e}return Pc(t,jh),fd(t,[{key:"getGlobalEnv",value:function(t=!1){return of(this.phase,t)}},{key:"getLogger",value:function(){return uf}}])}()),lf=()=>df;var hf;!function(t){t[t.IDLE=1]="IDLE",t[t.LOAD_REQUESTED=2]="LOAD_REQUESTED",t[t.LOADED=4]="LOADED",t[t.CLICKED=8]="CLICKED",t[t.IMPRESSED=16]="IMPRESSED",t[t.FAILED_TO_LOAD=32]="FAILED_TO_LOAD",t[t.OCCURRED_ERROR=64]="OCCURRED_ERROR",t[t.DESTROYED=128]="DESTROYED"}(hf||(hf={}));let ff=function(){function t(e){var n;return Mc(this,t),(n=Qh(this,t,[e.maxDedupReqCount,e.exclusionCriteriaList])).dequeue(),n}return Pc(t,Rh),fd(t,[{key:"displayAds",value:async function(t){for await(const e of t)await this.displayAd(e)}},{key:"restoreAds",value:async function(t){await Promise.all(t.map(t=>this.restoreAd(t)))}},{key:"displayAd",value:async function(t){uf.dedupDisplayAd(t.adSlot.getAdSlotElementId()),t.hasState(hf.LOAD_REQUESTED)||await t.loadAd(this)}},{key:"restoreAd",value:async function(t){if(uf.dedupRestoreAd(t.adSlot.getAdSlotElementId()),t.hasState(hf.LOAD_REQUESTED))return;const{adSlot:e}=t,n=e.getAdSlotElementId();if(!document.getElementById(n))return;const{persistenceStore:i,globalConfig:r}=lf(),s=i.getAd(`${Xd()}_${n}`),{enablePersistAd:o}=r;o&&s&&await t.loadAdWithPersistData(s)}}])}();var vf=new WeakMap,pf=new WeakMap,Ef=new WeakMap,gf=new WeakMap;let mf=function(){return fd(function t({dedupReqId:e,maxDedupReqCount:n,getAdSlotManager:i}){Mc(this,t),vd(this,"dedupReqId",void 0),vd(this,"maxDedupReqCount",void 0),Gh(this,vf,void 0),Gh(this,pf,void 0),Gh(this,Ef,void 0),Gh(this,gf,void 0),this.dedupReqId=e,this.maxDedupReqCount=n,$h(vf,this,[]),$h(pf,this,[]),$h(Ef,this,new Sd),Kh(Ef,this).forceExecuteCommands(),$h(gf,this,i)},[{key:"exclusionCriteriaList",get:function(){return Kh(pf,this)}},{key:"displayAds",value:function(t){Kh(Ef,this).push(async()=>{const e=[];for(const n of t){const t=Kh(gf,this).call(this,n);if(!t)continue;if(t.hasState(hf.LOAD_REQUESTED)){const{neloLogger:e}=lf();e.logMethodUniquely({method:"AdDeduplicationManager.displayAds (AdSlotState.LOAD_REQUESTED)",stace:(new Error).stack}),t.invalidate()}const i=Kh(vf,this).findIndex(t=>n.getAdSlotElementId()===t.getAdSlotElementId());-1===i?Kh(vf,this).push(n):Kh(vf,this).splice(i,1,n),e.push(t)}if(Td(e))return;const n=new ff(this);await n.displayAds(e)})}},{key:"restoreAds",value:function(t){const e=t??Kh(vf,this),n=[];for(const t of e){const e=Kh(gf,this).call(this,t);e&&(e.hasState(hf.LOAD_REQUESTED)&&e.invalidate(!0),n.push(e))}if(Td(n))return;new ff(this).restoreAds(n)}},{key:"clearAllExclusions",value:function(){Kh(pf,this).length=0}}])}(),yf=function(){function t(e){var n;return Mc(this,t),vd(n=Qh(this,t),"adSlot",void 0),n.adSlot=e,n}return Pc(t,ql),fd(t,[{key:"createAdapterInstance",value:function(t,e,n,i,{adSlotListener:r,isPersist:s}){return Array.isArray(e.adInfo.slots)&&!n.slotEventTrackingFlags&&(n.slotEventTrackingFlags=e.adInfo.slots.map(()=>({viewableImpressed:!1,viewable1pxImpressed:!1,viewable100Impressed:!1,viewable100pImpressed:!1}))),new t({store:lf(),adUnitId:this.adSlot.getAdUnitId(),adSlotElementId:this.adSlot.getAdSlotElementId(),customParam:this.adSlot.getCustomParam(),ad:e,adExtraData:n,eventNotifier:i,adSlotListener:r,isPersist:s})}},{key:"importAdapter",value:async function(t,e){const n=window.gladsdk?.[Lh.importAdapter];"function"==typeof n&&await n(t,e)}},{key:"getThirdPartyAdapters",value:function(){const{thirdPartyAdapters:t}=lf();return t}},{key:"getAdapterClass",value:function(e){return uf.getAdapterClass(e,this.adSlot.getAdSlotElementId()),Wh(t,"getAdapterClass",this,3)([e])}}])}(),Af=function(){function t({adSlot:e,adSlotListener:n,isPersist:i,...r}){var s;return Mc(this,t),vd(s=Qh(this,t,[r]),"adSlot",void 0),vd(s,"adSlotListener",void 0),vd(s,"isPersist",void 0),vd(s,"adapterPicker",void 0),s.adSlot=e,s.adSlotListener=n,s.isPersist=i,s.adapterPicker=new yf(s.adSlot),s}return Pc(t,Wl),fd(t,[{key:"pickAdapter",value:async function(t,e){uf.ad(t,this.adSlot.getAdSlotElementId());let n=t;[nd.NATIVE_SIMPLE,nd.NATIVE_NORMAL].includes(t.renderType)&&"native-ad-slot"===document.getElementById(this.adSlot.getAdSlotElementId())?.getAttribute("data-gfp-role")&&(n={...t,renderType:nd.NATIVE_ADVANCED});const i=await this.adapterPicker.pickAdapter(n,this.adExtraData,e,{adSlotListener:this.adSlotListener,isPersist:this.isPersist});return this.adSlotListener.dispatch(Ih.ADAPTER_PICKED,{adapter:i}),i}},{key:"getGlobalConfig",value:function(){const{globalConfig:t}=lf();return t}},{key:"loadAd",value:function(){return this.isPersist?this.processNextAd():Wh(t,"loadAd",this,3)([])}},{key:"destroy",value:function(e=!1){e&&this.pickedAdapter?.fixContainerHeight(),Wh(t,"destroy",this,3)([])}},{key:"throwEmptyRenderError",value:function(t){throw new Kl(t,lf().emptyAdsObserver,document.getElementById(this.adSlot.getAdSlotElementId()),this.adExtraData.waterfallResponseConfig?.imp)}}])}(),Sf=function(){function t(){return Mc(this,t),Qh(this,t,arguments)}return Pc(t,vh),fd(t,[{key:"execute",value:async function(){const e=this.httpClient.baseURL+"/gfp/v1";uf.adCall(this.adCallParams,e,this.adCallParams.xdid);return await Wh(t,"execute",this,3)([])}}])}(),Rf=function(){function t(e){var n;return Mc(this,t),vd(n=Qh(this,t,[{adUnitId:e.getAdUnitId(),adSlotElementId:e.getAdSlotElementId(),customParam:e.getCustomParam(),contentInfo:e.getContentInfo()},lf()]),"adSlot",void 0),n.adSlot=e,n}return Pc(t,_h),fd(t,[{key:"getHttpClient",value:function(){const{globalEnv:t}=this.store;return function(t){const e="function"!=typeof window?.fetch||"function"!=typeof AbortSignal?.any;return new lh(e?new ch(t):new ah(t))}(t.gfp.adCallUrl)}},{key:"build",value:function(){const t=this.buildAdRequestProps();return{adRequest:new Sf(t),cancelSource:t.cancelSource}}},{key:"buildAdCallParams",value:function(){const e=Wh(t,"buildAdCallParams",this,3)([]),{debug:n}=lf(),i={...e,uim:this.adSlot.getUnifiedIdMap()};return n&&(i.ua=this.adSlot.ua,i.dip=this.adSlot.dip),i}}])}(),If=function(){return fd(function t(){Mc(this,t)},null,[{key:"loadScript",value:async function(){try{if(Bd())return;const{resourceLoader:t,globalEnv:e}=lf(),{nacModuleUrl:n}=e.gfp;await t.saveAndLoad("nacModule","javascript",n)}catch(t){}}},{key:"getNCParam",value:function(){try{return localStorage.getItem("NAC")??void 0}catch(t){return""}}}])}(),Tf=function(){return fd(function t({adSlot:e,adSlotListener:n}){Mc(this,t),vd(this,"adSlot",void 0),vd(this,"adSlotListener",void 0),vd(this,"adExtraData",void 0),vd(this,"adMediator",void 0),vd(this,"accumulatedState",void 0),vd(this,"cancelSource",void 0),this.adSlot=e,this.adSlotListener=n,this.adExtraData={},this.accumulatedState=hf.IDLE,this.adSlotListener.addEventListener(Ih.AD_LOADED,()=>{uf.adLoaded(this.adSlot.getAdSlotElementId()),this.setState(hf.LOADED)}),this.adSlotListener.addEventListener(Ih.AD_RENDERED,()=>{uf.adRendered(this.adSlot.getAdSlotElementId())}),this.adSlotListener.addEventListener(Ih.AD_CLICKED,()=>{uf.adClicked(this.adSlot.getAdSlotElementId()),this.setState(hf.CLICKED)}),this.adSlotListener.addEventListener(Ih.AD_IMPRESSED,()=>{uf.adImpressed(this.adSlot.getAdSlotElementId()),this.setState(hf.IMPRESSED)}),this.adSlotListener.addEventListener(Ih.LOAD_ERROR,({error:t})=>{this.setState(hf.FAILED_TO_LOAD),uf.gfpError(t,this.adSlot.getAdUnitId(),this.adSlot.getAdSlotElementId())}),this.adSlotListener.addEventListener(Ih.START_ERROR,({error:t})=>{this.setState(hf.OCCURRED_ERROR),uf.gfpError(t,this.adSlot.getAdUnitId(),this.adSlot.getAdSlotElementId())})},[{key:"loadAd",value:async function(t){this.setState(hf.LOAD_REQUESTED),this.unobserveEmptyAdElement(),uf.loadAd(this.adSlot.getAdSlotElementId());try{const{adRequest:e,cancelSource:n}=new Rf(this.adSlot).withAdDeduplicationChunk(t).withNAC(If.getNCParam()).withPbjsTargeting(this.adSlot.getPbjsTargeting()).withApsTargeting(this.adSlot.getApsTargeting()).build();this.cancelSource=n;const i=await e.execute();if(!i)return;const{adResponse:r,timeMap:s}=i;this.handleWaterfallResponse(r,t),await this.mediateAds(r.ads,r.eventTracking,s,!1)}catch(t){this.handleLoadError(t)}}},{key:"loadAdWithPersistData",value:async function(t){this.setState(hf.LOAD_REQUESTED),this.unobserveEmptyAdElement(),uf.loadAdWithPersistData(this.adSlot.getAdSlotElementId());try{const{ad:e,adExtraData:n}=t,i=new eh;if(i.set("request",Date.now()),i.set("response",Date.now()),!n.gfpEventTracking)throw new jl(Kc.LOAD_ERROR_INVALID_PARAM,$c.MISSING_PARAM,"gfpEventTracking is required");this.adExtraData=n,await this.mediateAds([e],n.gfpEventTracking,i,!0)}catch(t){this.handleLoadError(t)}}},{key:"loadAdWithWaterfallResponse",value:async function(t,e){this.setState(hf.LOAD_REQUESTED),this.unobserveEmptyAdElement(),uf.loadAdWithWaterfallResponse(this.adSlot.getAdSlotElementId());try{this.handleWaterfallResponse(t,e);const n=new eh;n.set("request",Date.now()),n.set("response",Date.now()),await this.mediateAds(t.ads,t.eventTracking,n,!1)}catch(t){this.handleLoadError(t)}}},{key:"refreshAd",value:async function(){if(!(this.hasState(hf.LOAD_REQUESTED)&&!this.hasState(hf.LOADED)&&!this.hasState(hf.FAILED_TO_LOAD)&&!this.hasState(hf.OCCURRED_ERROR)&&!this.hasState(hf.DESTROYED)))return uf.refresh(this.adSlot.getAdSlotElementId()),this.invalidate(),this.loadAd()}},{key:"setState",value:function(t){this.accumulatedState|=t}},{key:"hasState",value:function(t){return(this.accumulatedState&t)===t}},{key:"mediateAds",value:async function(t,e,n,i=!1){this.adExtraData.gfpEventTracking=e,this.adMediator=new Af({adSlot:this.adSlot,adSlotListener:this.adSlotListener,ads:t,adExtraData:this.adExtraData,eventTracking:e,timeMap:n,isPersist:i}),await this.adMediator.loadAd()}},{key:"unobserveEmptyAdElement",value:function(){const t=document.getElementById(this.adSlot.getAdSlotElementId());t&&lf().emptyAdsObserver.unobserve(t)}},{key:"handleWaterfallResponse",value:function(t,e){if(this.adExtraData.requestId=t.requestId,this.adExtraData.randomNumber=t.randomNumber,this.adExtraData.waterfallResponseConfig=t.config,e){const{adDuplicationKeys:n=[],advertiserDomains:i=[]}=t;e.accumulateExclusionCriteria({adDuplicationKeys:n,advertiserDomains:i})}lf().extensionBridge.sendWaterfallResponse(t),t.skadnt&&this.registerSkadnToken(t.skadnt)}},{key:"registerSkadnToken",value:function(t){try{const{appSDKCommunicator:e,globalEnv:n}=lf(),{skadn:i,appVersion:r}=e.getAppEnv()||{};if(i&&r){const{skAdNetworkIds:e,skAdNetworkVersion:s}=i,o={av:r,skadn:{sav:(Array.isArray(s)?s.join(","):s)||"",sai:(Array.isArray(e)?e:e.split(","))||[]}};lf().neloLogger.logMethodFrequently({method:`AdSlotManager.registerSkadnToken(${t})`,sampleRate:1}),fetch(`${n.gfp.adCallUrl}/registSkAdn/${t}`,{method:"POST",body:JSON.stringify(o)})}}catch(t){}}},{key:"handleLoadError",value:function(t){t instanceof Error&&uf.error(t);const e=jl.fromError(t,Kc.INTERNAL_ERROR,$c.UNSPECIFIED);this.adSlotListener.dispatch(Ih.LOAD_ERROR,{error:e})}},{key:"invalidate",value:function(t=!1){this.accumulatedState=hf.IDLE,this.cancelSource?.cancel(),this.adExtraData={},this.adMediator?.destroy(t)}},{key:"destroy",value:function(){uf.destroy(this.adSlot.getAdSlotElementId()),this.setState(hf.DESTROYED),this.cancelSource?.cancel(),this.adSlotListener.destroy(),this.adMediator?.destroy()}}])}();var Df=new WeakMap;let kf=function(){return fd(function t(e){Mc(this,t),Gh(this,Df,void 0),$h(Df,this,e)},[{key:"onLoadAdm",value:function(){Kh(Df,this).onLoadAdm()}},{key:"addCallback",value:function(t){Kh(Df,this).addCallback(t)}},{key:"exposureChangeSetting",value:function(t){Kh(Df,this).exposureChangeSetting(t)}},{key:"notifyAdMeta",value:function(t){Kh(Df,this).creativeMetaChanged(t)}},{key:"setNativeBridge",value:function(t){Kh(Df,this).setNativeBridge(t)}}])}();var bf=new WeakMap,_f=new WeakMap,wf=new WeakMap,Lf=new WeakMap,Of=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Mf=new WeakMap,Nf=new WeakMap;let Uf=function(){return fd(function t({adUnitId:e,adSlotElementId:n,adSlotBridge:i,customParam:r,contentInfo:s,unifiedIdMap:o}){Mc(this,t),Gh(this,bf,void 0),Gh(this,_f,void 0),Gh(this,wf,void 0),Gh(this,Lf,void 0),Gh(this,Of,void 0),Gh(this,Cf,void 0),Gh(this,Pf,void 0),Gh(this,Mf,void 0),Gh(this,Nf,void 0),vd(this,"ua",void 0),vd(this,"dip",void 0),$h(bf,this,e),$h(_f,this,n),$h(wf,this,i),$h(Pf,this,new kf(i)),r&&$h(Lf,this,Zd(r)),s&&$h(Of,this,Zd(s)),o&&$h(Cf,this,o)},[{key:"getAdUnitId",value:function(){return Kh(bf,this)}},{key:"getAdSlotElementId",value:function(){return Kh(_f,this)}},{key:"getCustomParam",value:function(){return Kh(Lf,this)}},{key:"getContentInfo",value:function(){return Kh(Of,this)}},{key:"getUnifiedIdMap",value:function(){return Kh(Cf,this)}},{key:"getAdProviderName",value:function(){return Kh(wf,this).getAdProviderName()}},{key:"getCreativeType",value:function(){return Kh(wf,this).getCreativeType()}},{key:"getNativeAdVisualId",value:function(){return lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.getNativeAdVisualId",stace:(new Error).stack}),Kh(wf,this).getNativeAdVisualId()}},{key:"getVideoController",value:function(){return lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.getVideoController",stace:(new Error).stack}),Kh(wf,this).getVideoController()}},{key:"getNdaAPI",value:function(){return lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.getNdaAPI",stace:(new Error).stack}),Kh(Pf,this)}},{key:"setCustomParam",value:function(t,e){$h(Lf,this,Object.assign({},Kh(Lf,this),{[t]:e}))}},{key:"setApsBidTargeting",value:function(t){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.setApsBidTargeting",stace:(new Error).stack}),Td(t)||(uf.apsBid(t,this.getAdSlotElementId()),$h(Mf,this,t))}},{key:"getApsTargeting",value:function(){return lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.getApsTargeting",stace:(new Error).stack}),Kh(Mf,this)}},{key:"setPbjsBidTargeting",value:function(t){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.setPbjsBidTargeting",stace:(new Error).stack}),Td(t)||(uf.pbjsBid(t,this.getAdSlotElementId()),$h(Nf,this,[...t]))}},{key:"getPbjsTargeting",value:function(){return lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.getPbjsTargeting",stace:(new Error).stack}),Kh(Nf,this)}},{key:"setClickHandler",value:function(t){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.setClickHandler",stace:(new Error).stack}),Kh(wf,this).setClickHandler(t)}},{key:"setNativeClickHandler",value:function(t){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.setNativeClickHandler",stace:(new Error).stack}),this.setClickHandler(t)}},{key:"setHostMeta",value:function(t,e){!Td(e)&&["number","string","object","boolean"].includes(typeof e)&&(uf.hostMeta(t,e,this.getAdSlotElementId()),Kh(wf,this).setHostMeta(t,e))}},{key:"setRenderConfig",value:function(t){Kh(wf,this).setRenderConfig(t)}},{key:"setForceSafeFrame",value:function(t){Kh(wf,this).setForceSafeFrame(t)}},{key:"setActivateIframeEvent",value:function(t){Kh(wf,this).setActivateIframeEvent(t)}},{key:"initEvent",value:function(){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.initEvent",stace:(new Error).stack}),Kh(wf,this).initEvent()}},{key:"clearVisibilityObserver",value:function(){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.clearVisibilityObserver",stace:(new Error).stack}),Kh(wf,this).clearVisibilityObserver()}},{key:"destroy",value:function(){lf().neloLogger.logMethodUniquely({method:"AdSlotImpl.destroy",stace:(new Error).stack})}}])}(),Ff=function(){return fd(function t(){Mc(this,t)},null,[{key:"initBounceBackEvent",value:function(){document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.fireBounceBackEvent()}),window.addEventListener("pageshow",()=>{Sl()&&this.fireBounceBackEvent()})}},{key:"fireBounceBackEvent",value:function(){const{persistenceStore:t}=lf(),e=t.getBounceBackMeta();if(!e)return;const{bounceUrls:n,timestamp:i}=e;if(Td(n))return;const r=Number(new Date)-i;n.forEach(t=>{Nl.reportEvent(t,void 0,{bbt:r})}),t.clearBounceBackMeta()}}])}(),xf=function(){return fd(function t({adSlotListener:e}){Mc(this,t),vd(this,"adSlotListener",void 0),vd(this,"cmd",void 0),vd(this,"pickedAdapterRef",void 0),vd(this,"hostMeta",void 0),vd(this,"forceSafeFrame",void 0),vd(this,"activateIframeEvent",void 0),vd(this,"renderConfig",void 0),vd(this,"clickHandler",void 0),this.adSlotListener=e,this.cmd=new yl;const{hostMeta:n}=lf();this.hostMeta=new Map(n),e.addEventListener(Ih.ADAPTER_PICKED,({adapter:t})=>{this.setPickedAdapter(t)})},[{key:"getSize",value:function(){return this.pickedAdapter?.getSize()}},{key:"getAdContext",value:function(){return this.pickedAdapter?.getAdContext()}},{key:"getAdProviderName",value:function(){return this.pickedAdapter?.getAdProviderName()}},{key:"getCreativeType",value:function(){return this.pickedAdapter?.getCreativeType()}},{key:"getNativeAdVisualId",value:function(){return this.pickedAdapter?.getNativeAdVisualId()}},{key:"getVideoController",value:function(){return new Promise((t,e)=>{this.cmd.push(()=>{const n=this.pickedAdapter??{};if("getVideoController"in n&&"function"==typeof n.getVideoController){const e=n.getVideoController();e&&t(e)}e()})})}},{key:"setHostMeta",value:function(t,e){this.hostMeta.set(t,e);const n=this.pickedAdapter??{};"setHostMeta"in n&&"function"==typeof n.setHostMeta&&n.setHostMeta(this.hostMeta)}},{key:"setRenderConfig",value:function(t){this.renderConfig=t,this.pickedAdapter?.setRenderConfig(t)}},{key:"setForceSafeFrame",value:function(t){this.forceSafeFrame=t;const e=this.pickedAdapter??{};"setForceSafeFrame"in e&&"function"==typeof e.setForceSafeFrame&&e.setForceSafeFrame(t)}},{key:"setActivateIframeEvent",value:function(t){this.activateIframeEvent=t;const e=this.pickedAdapter??{};"setActivateIframeEvent"in e&&"function"==typeof e.setActivateIframeEvent&&e.setActivateIframeEvent(t)}},{key:"setClickHandler",value:function(t){this.clickHandler=t,this.pickedAdapter?.setClickHandler(t)}},{key:"initEvent",value:function(){this.cmd.push(()=>{const t=this.pickedAdapter??{};"initEvent"in t&&"function"==typeof t.initEvent&&t.initEvent()})}},{key:"onLoadAdm",value:function(){this.cmd.push(()=>{const t=this.pickedAdapter??{};"onLoadAdm"in t&&"function"==typeof t.onLoadAdm&&t.onLoadAdm()})}},{key:"addCallback",value:function(t){this.cmd.push(()=>{const e=this.pickedAdapter??{};"addCallback"in e&&"function"==typeof e.addCallback&&e.addCallback(t)})}},{key:"exposureChangeSetting",value:function(t){this.cmd.push(()=>{const e=this.pickedAdapter??{};"exposureChangeSetting"in e&&"function"==typeof e.exposureChangeSetting&&e.exposureChangeSetting(t)})}},{key:"creativeMetaChanged",value:function(t){this.adSlotListener.dispatch(Ih.CREATIVE_META_CHANGED,{creativeMeta:t})}},{key:"clearVisibilityObserver",value:function(){this.cmd.push(()=>{const t=this.pickedAdapter;t?.clearVisibilityObserver()})}},{key:"setNativeBridge",value:function(t){this.cmd.push(()=>{const e=this.pickedAdapter??{};"setNativeBridge"in e&&"function"==typeof e.setNativeBridge&&e.setNativeBridge(t)})}},{key:"pickedAdapter",get:function(){return this.pickedAdapterRef?.deref()}},{key:"setPickedAdapter",value:function(t){this.pickedAdapterRef=new WeakRef(t),"setHostMeta"in t&&"function"==typeof t.setHostMeta&&t.setHostMeta(this.hostMeta),"setRenderConfig"in t&&"function"==typeof t.setRenderConfig&&t.setRenderConfig(this.renderConfig),"setForceSafeFrame"in t&&"function"==typeof t.setForceSafeFrame&&t.setForceSafeFrame(this.forceSafeFrame),"setActivateIframeEvent"in t&&"function"==typeof t.setActivateIframeEvent&&t.setActivateIframeEvent(this.activateIframeEvent),"setClickHandler"in t&&"function"==typeof t.setClickHandler&&t.setClickHandler(this.clickHandler),this.cmd.forceExecuteCommands()}}])}();var Vf;!function(t){t.AD_LOADED="AD_LOADED",t.AD_RENDERED="AD_RENDERED",t.AD_CLICKED="AD_CLICKED",t.AD_IMPRESSED="AD_IMPRESSED",t.AD_MUTE_COMPLETED="AD_MUTE_COMPLETED",t.AD_MUTE_STATE_CHANGED="AD_MUTE_STATE_CHANGED",t.AD_META_CHANGED="AD_META_CHANGED",t.CREATIVE_META_CHANGED="CREATIVE_META_CHANGED",t.ERROR="ERROR",t.EMPTY="EMPTY"}(Vf||(Vf={}));let Hf=function(){function t(){return Mc(this,t),Qh(this,t,arguments)}return Pc(t,vl),fd(t,[{key:"dispatch",value:function(t,...e){const n=this.eventHandlers[t];n&&n.forEach(t=>{try{t(...e)}catch(t){}})}}])}(),jf=function(){function t(e){return Mc(this,t),Qh(this,t,[e,lf()])}return Pc(t,_h),fd(t,[{key:"getHttpClient",value:function(){throw new Error("Ad calls are not supported in DummyAdRequestBuilder")}},{key:"buildAdCallParams",value:function(){return Wh(t,"buildAdCallParams",this,3)([])}}])}();var Bf=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Kf=new WeakMap,$f=new WeakMap,zf=new WeakSet;let Qf=function(){return fd(function t(){var e,n;Mc(this,t),qh(e=this,n=zf),n.add(e),Gh(this,Bf,void 0),Gh(this,Wf,void 0),Gh(this,Gf,void 0),Gh(this,qf,void 0),Gh(this,Kf,void 0),Gh(this,$f,new WeakMap),If.loadScript(),Ff.initBounceBackEvent(),$h(Bf,this,lf()),$h(Wf,this,[]),$h(Gf,this,new WeakMap),$h(qf,this,new Map),$h(Kf,this,new Hf)},[{key:"getPhase",value:function(){return Kh(Bf,this).phase}},{key:"setPhase",value:function(t){Kh(Bf,this).setPhase(t)}},{key:"getAdCallUrl",value:function(){return Kh(Bf,this).globalEnv.gfp.adCallUrl}},{key:"getVersion",value:function(){return Kh(Bf,this).globalEnv.version}},{key:"getGlobalConfig",value:function(){const t=Kh(Bf,this).globalConfig;return{...t,phase:this.getPhase(),debug:Kh(Bf,this).debug,activateIframeTouch:t.activateIframeEvent?.touch}}},{key:"setGlobalConfig",value:function(t){const{phase:e,debug:n,activateIframeTouch:i,...r}=t;Td(e)||(Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setGlobalConfig(phase)",stace:(new Error)?.stack}),this.setPhase(e)),Td(n)||(Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setGlobalConfig(debug)",stace:(new Error)?.stack}),this.setPhase(this.getPhase())),Td(i)||(Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setGlobalConfig(activateIframeTouch)",stace:(new Error)?.stack}),r.activateIframeEvent=Object.assign({},r.activateIframeEvent,{touch:i})),Kh(Bf,this).setGlobalConfig(r),uf.globalConfig(t)}},{key:"getAdCallQuery",value:function(t){const e=new jf(t).withNAC(If.getNCParam()).buildAdCallParams(),n=Object.entries({...e,en:1,ua:window.navigator.userAgent}).reduce((t,[e,n])=>(Td(n)||(t[e]=n),t),{});return Xl(n)}},{key:"defineAdSlot",value:function(t){const{adUnitId:e,customParam:n,contentInfo:i,unifiedIdMap:r}=t;let s=t.adSlotElementId;if(s){const t=this.findAdSlot(s);if(t)return t}else{const t=Kh(Wf,this).filter(t=>t.getAdUnitId()===e);s=`gfp_ad_${e}_${t.length+1}`}const o={};["ai","iv","yob","gender","uct","uid"].forEach(e=>{Td(t[e])||(o[e]=t[e])}),this.setGlobalConfig(o);const a=new Th,u=new xf({adSlotListener:a}),c=new Uf({adUnitId:e,adSlotElementId:s,customParam:n,contentInfo:i,adSlotBridge:u,unifiedIdMap:r}),d=new Tf({adSlot:c,adSlotListener:a});function l(t){const e=u.getAdContext(),{slotIndex:n,...i}=t||{},r={ad:{slot:c,size:u.getSize()},...i};return Td(e)||(r.ad.adContext=e,Td(n)||(r.ad.slotIndex=n)),r}return Kh(Wf,this).push(c),Kh(Gf,this).set(c,d),a.addEventListener(Ih.AD_LOADED,()=>{Kh(Kf,this).dispatch(Vf.AD_LOADED,l())}),a.addEventListener(Ih.AD_RENDERED,()=>{Kh(Kf,this).dispatch(Vf.AD_RENDERED,l())}),a.addEventListener(Ih.AD_CLICKED,t=>{Kh(Kf,this).dispatch(Vf.AD_CLICKED,l(t))}),a.addEventListener(Ih.AD_IMPRESSED,()=>{Kh(Kf,this).dispatch(Vf.AD_IMPRESSED,l())}),a.addEventListener(Ih.AD_MUTE_COMPLETED,()=>{Kh(Kf,this).dispatch(Vf.AD_MUTE_COMPLETED,l())}),a.addEventListener(Ih.AD_MUTE_STATE_CHANGED,t=>{Kh(Kf,this).dispatch(Vf.AD_MUTE_STATE_CHANGED,l(t))}),a.addEventListener(Ih.CREATIVE_META_CHANGED,t=>{Kh(Kf,this).dispatch(Vf.AD_META_CHANGED,l(t)),Kh(Kf,this).dispatch(Vf.CREATIVE_META_CHANGED,l(t))}),a.addEventListener(Ih.LOAD_ERROR,t=>{Kh(Kf,this).dispatch(Vf.ERROR,l(t)),t.error instanceof Kl&&Kh(Kf,this).dispatch(Vf.EMPTY,l(t))}),a.addEventListener(Ih.START_ERROR,t=>{Kh(Kf,this).dispatch(Vf.ERROR,l(t))}),uf.defineAdSlot(t),c}},{key:"hasAdSlot",value:function(t){return null!==this.findAdSlot(t)}},{key:"findAdSlot",value:function(t){return zh(zf,this,Yf).call(this,t)}},{key:"refreshAdSlots",value:function(t){const e=zh(zf,this,Xf).call(this,t);for(const t of e){const e=Kh(Gf,this).get(t);e?.refreshAd()}uf.refreshAdSlots(e.map(t=>t.getAdSlotElementId()))}},{key:"destroyAdSlots",value:function(t){const e=zh(zf,this,Xf).call(this,t);for(const t of e)$h(Wf,this,Kh(Wf,this).filter(e=>{if(t===e){const t=Kh(Gf,this).get(e);return t?.destroy(),Kh(Gf,this).delete(e),!1}return!0}));uf.destroyAdSlots(e.map(t=>t.getAdSlotElementId()))}},{key:"displayAd",value:function(t){const e=zh(zf,this,Yf).call(this,t);if(!e)return;uf.displayAd(e.getAdUnitId(),e.getAdSlotElementId());const n=Kh(Gf,this).get(e);if(!n)return;if(n.hasState(hf.LOAD_REQUESTED))return;const{enablePersistAd:i}=this.getGlobalConfig();if(i&&Sl()){const{persistenceStore:t}=lf(),i=e.getAdSlotElementId(),r=t.getAd(`${Xd()}_${i}`);if(r&&document.getElementById(i))return void n.loadAdWithPersistData(r)}n.loadAd()}},{key:"displayAdWithResponse",value:function(t,e,n){const i=zh(zf,this,Yf).call(this,t);let r;if(n){const t=this.findAdDedupManager(n);t instanceof mf&&(r=new ff(t))}if(!i)return;const s=Kh(Gf,this).get(i);s&&(s.hasState(hf.LOAD_REQUESTED)||s.loadAdWithWaterfallResponse(e,r))}},{key:"restoreAd",value:function(t){const{enablePersistAd:e}=this.getGlobalConfig();if(!e)return;const n=Td(t)?Kh(Wf,this):[t];for(const t of n){if(!t)continue;uf.restoreAd(t.getAdUnitId(),t.getAdSlotElementId());const e=Kh(Gf,this).get(t);if(!e)continue;if(e.hasState(hf.LOAD_REQUESTED))continue;const n=t.getAdSlotElementId();if(!document.getElementById(n))continue;const{persistenceStore:i}=lf(),r=i.getAd(`${Xd()}_${n}`);r&&e.loadAdWithPersistData(r)}}},{key:"setMediationList",value:function(t,e){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setMediationList()",stace:(new Error)?.stack});const{adDivId:n}=t;this.displayAdWithResponse(String(n),t,e)}},{key:"setAdDeduplication",value:function(t,e){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setAdDeduplication()",stace:(new Error)?.stack});let n=this.findAdDedupManager(t);return n instanceof mf?(n.maxDedupReqCount=e??Kh(Bf,this).globalConfig.maxDedupReqCount,n.clearAllExclusions()):(n=new mf({dedupReqId:t,maxDedupReqCount:e,getAdSlotManager:t=>Kh(Gf,this).get(t)??null}),Kh(qf,this).set(t,n)),uf.setAdDeduplication(t,e),n}},{key:"findAdDedupManager",value:function(t){return Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.findAdDedupManager()",stace:(new Error)?.stack}),Kh(qf,this).get(t)??null}},{key:"clearAdDeduplication",value:function(t){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.clearAdDeduplication()",stace:(new Error)?.stack});const e=this.findAdDedupManager(t);e instanceof mf&&e.clearAllExclusions(),Kh(qf,this).delete(t)}},{key:"setHostMeta",value:function(t,e){Kh(Bf,this).hostMeta.set(t,e),Kh(Wf,this).forEach(n=>n.setHostMeta(t,e)),uf.setHostMeta(t,e)}},{key:"setForceSafeFrame",value:function(t){Kh(Bf,this).setForceSafeFrame(t),Kh(Wf,this).forEach(e=>e.setForceSafeFrame(t))}},{key:"setCustomParam",value:function(t,e){Kh(Bf,this).setCustomParam(t,e)}},{key:"setPrivacySettings",value:function(t){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setPrivacySettings()",stace:(new Error)?.stack}),Kh(Bf,this).setPrivacySettings(t)}},{key:"setSegmentForABT",value:function(t){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setSegmentForABT()",stace:(new Error)?.stack}),Kh(Bf,this).setSegmentForABT(t)}},{key:"setContentId",value:function(t){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.setContentId()",stace:(new Error)?.stack}),Kh(Bf,this).setContentId(t)}},{key:"addEventListener",value:function(t,e){let n;switch(t){case Vf.AD_MUTE_STATE_CHANGED:n=Kh(Kf,this).addEventListener(Vf.AD_MUTE_STATE_CHANGED,t=>{e(t.ad,t.state)});break;case Vf.AD_META_CHANGED:case Vf.CREATIVE_META_CHANGED:t===Vf.AD_META_CHANGED&&Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.addEventListener(DisplayAdEvent.AD_META_CHANGED)",stace:(new Error)?.stack}),n=Kh(Kf,this).addEventListener(t,t=>{e(t.ad,t.creativeMeta)});break;case Vf.ERROR:case Vf.EMPTY:n=Kh(Kf,this).addEventListener(Vf.ERROR,t=>{e(t.ad,t.error)});break;case Vf.AD_LOADED:case Vf.AD_RENDERED:case Vf.AD_CLICKED:case Vf.AD_IMPRESSED:case Vf.AD_MUTE_COMPLETED:n=Kh(Kf,this).addEventListener(t,t=>{e(t.ad)});break;default:return}Kh($f,this).set(e,n)}},{key:"removeEventListener",value:function(t,e){const n=Kh($f,this).get(e);n&&(n(),Kh($f,this).delete(e))}},{key:"removeAllEventListener",value:function(){return Kh(Kf,this).removeAllListeners()}},{key:"clearActiveViews",value:function(){Kh(Bf,this).neloLogger.logMethodUniquely({method:"GfpDisplay.clearActiveViews()",stace:(new Error)?.stack}),Kh(Wf,this).forEach(t=>{t.clearVisibilityObserver();const e=document.getElementById(t.getAdSlotElementId());e&&Kh(Bf,this).emptyAdsObserver.unobserve(e)})}},{key:"addThirdPartyAdapter",value:function(t){Kh(Bf,this).addThirdPartyAdapter(t)}},{key:"addLogger",value:function(t){return af.addLogger(t)}},{key:"startExtensionBridge",value:function(){Kh(Bf,this).extensionBridge.tryHandshake()}}])}();function Xf(t){return t?t.reduce((t,e)=>(e instanceof Uf&&Kh(Wf,this).includes(e)&&t.push(e),t),[]):Kh(Wf,this)}function Yf(t){if(t instanceof Uf)return t;const e=t instanceof HTMLElement?t.id:t;return Kh(Wf,this).find(t=>t.getAdSlotElementId()===e)??null}class Jf extends Qf{cmd;event=Vf;constructor(t){super(),window.gladsdk=this,this.cmd=new ml(t)}[Lh.importAdapter]=async t=>{switch(t){case nd.NDA_BANNER_NDP:{const{ndpBannerAdapter:t}=await import("./gfp-display-nda.js");this.addThirdPartyAdapter(t);break}case nd.NDA_BANNER_SF:{const{sfBannerAdapter:t}=await import("./gfp-display-nda.js");this.addThirdPartyAdapter(t);break}case nd.NDA_BANNER_JS:{const{jsBannerAdapter:t}=await import("./gfp-display-nda.js");this.addThirdPartyAdapter(t);break}case nd.NATIVE_SIMPLE:case nd.NATIVE_NORMAL:case nd.NATIVE_COMPOSITE:{const{ndaNativeAdapter:t}=await import("./gfp-display-nda.js");this.addThirdPartyAdapter(t);break}case nd.NATIVE_ADVANCED:{const{ndaNativeAdvancedAdapter:t}=await import("./gfp-display-nda.js");this.addThirdPartyAdapter(t);break}case nd.GOOGLE_BANNER:{const{gptBannerAdapter:t}=await import("./gfp-display-gpt.js");this.addThirdPartyAdapter(t);break}case nd.TEADS_BANNER:{const{teadsBannerAdapter:t}=await import("./gfp-display-teads.js");this.addThirdPartyAdapter(t);break}}};async loadSentry(t={}){const{DisplaySentryLogger:e}=await import("./gfp-display-sentry-logger.js"),n=this.addLogger(e),i=["sampleRate"].reduce((e,n)=>void 0!==t[n]&&null!==t[n]?{...e,[n]:t[n]}:e,{});await n.loadSentry(i)}async startDevtools(t){const{DisplayDevtoolsLogger:e}=await import("./gfp-display-devtools-logger.js");this.addLogger(e).startDevtools(t)}}const Zf=window.gladsdk??{cmd:[]};if(!(Zf instanceof Jf)){new Jf(Zf.cmd)}export{Hc as A,Ph as B,Wc as C,Gc as E,jl as G,fh as J,Yc as M,Mh as N,nd as R,kh as V,Pc as _,fd as a,Kc as b,$c as c,Yd as d,Ih as e,il as f,ul as g,Mc as h,Td as i,vd as j,Al as k,cd as l,or as m,sr as n,yl as o,gh as p,vl as q,Vu as r,tl as s,mh as t,zc as u,Rd as v,Zl as w,jc as x};
//# sourceMappingURL=gfp-display-sdk.js.map
